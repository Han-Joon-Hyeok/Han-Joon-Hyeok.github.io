---
title: "HTTPμ™€ HTTPS, κ·Έλ¦¬κ³  SSL/TLS"
date: 2023-04-05 13:05:00 +0900
categories: [docker]
tags: [docker]
---

# HTTP μ™€ HTTPS

## HTTP

HTTP λ” HyperText Transfer Protocol μ μ•½μλ΅, ν•μ΄νΌν…μ¤νΈλ¥Ό μ „μ†΅ν•κΈ° μ„ν•΄ μ‚¬μ©λλ” ν†µμ‹  κ·μ•½(Protocol)μ΄λ‹¤.

μ¦‰, μΈν„°λ„·μ—μ„ HTML κ³Ό κ°™μ€ λ¬Έμ„λ¥Ό ν΄λΌμ΄μ–ΈνΈ(μ‚¬μ©μ)μ μ›Ή λΈλΌμ°μ €κ°€ μ›Ή μ„λ²„(μ„λΉ„μ¤ μ κ³µμ)μ— μ”μ²­ν•κ±°λ‚ μ›Ή μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‘λ‹µμ„ λ³΄λ‚Ό λ• μ§€μΌμ•Ό ν•λ” κ·μΉ™(ν”„λ΅ν† μ½)μ„ μλ―Έν•λ‹¤.

μ—¬κΈ°μ„ ν”„λ΅ν† μ½μ΄λ€ κ°„λ‹¨ν•κ² μ •ν•΄μ§„ κ·μΉ™ λλ” μ–‘μ‹μ΄λΌ μƒκ°ν•λ©΄ λλ‹¤. νƒλ°°λ¥Ό μ£Όκ³  λ°›μ„ λ• μ •ν•΄μ§„ μ†΅μ¥ μ–‘μ‹μ— μ¬λ°”λ¥΄κ² μ‘μ„±ν•΄μ•Ό λ¬Έμ μ—†μ΄ μ μ£Όκ³  λ°›μ„ μ μλ” κ²ƒκ³Ό λΉ„μ·ν•λ‹¤.

![1.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/1.png)

HTTP μ„λ²„(μ›Ή μ„λ²„)λ” 80λ² ν¬νΈμ—μ„ μ„λΉ„μ¤λ¥Ό λ€κΈ°ν•κ³  μλ‹¤κ°€ ν΄λΌμ΄μ–ΈνΈ(μ›Ή λΈλΌμ°μ €)κ°€ TCP 80λ² ν¬νΈλ¥Ό μ‚¬μ©ν•΄ μ—°κ²°ν•λ©΄ μ„λ²„λ” μ”μ²­μ— μ‘λ‹µν•λ©΄μ„ μλ£λ¥Ό μ „μ†΅ν•λ‹¤.

### μ”μ²­ λ©”μ„Έμ§€(request message)

ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­(request)μ„ ν•  λ•λ” μ•„λμ™€ κ°™μ€ λ‚΄μ©μ„ λ‹΄μ•„μ„ λ³΄λ‚Έλ‹¤.

![2.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/2.png)

μ¶μ²: [HTTP Request Message Format](http://www.tcpipguide.com/free/t_HTTPRequestMessageFormat.htm) [tcpipguide]

ν¬ν•¨λλ” λ‚΄μ©μ„ μ¶”λ ¤μ„ μ •λ¦¬ν•λ©΄ μ•„λμ™€ κ°™λ‹¤.

- μ”μ²­ν•λ” λ¦¬μ†μ¤(μ„μ μ‚¬μ§„μ—μ„λ” `/index.html`)
- μ–΄λ–¤ λ©”μ„λ“λ¥Ό μ‚¬μ©ν• μ§€(GET, POST, DELETE, PUT λ“±)
- HTTP λ²„μ „ μ •λ³΄
- μ”μ²­μ„ λ³΄λ‚΄λ” λ„λ©”μΈ μ΄λ¦„(ν„μ¬ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ‚¬μ΄νΈμ μ£Όμ†)

### μ‘λ‹µ λ©”μ„Έμ§€(response message)

μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• κ²ƒμ— λ€ν•΄ μ‘λ‹µ(response)ν•  λ•λ” μ•„λμ™€ κ°™μ€ λ‚΄μ©μ„ λ‹΄μ•„μ„ λ³΄λ‚Έλ‹¤.

![3.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/3.png)

μ¶μ²: [HTTP Request Message Format](http://www.tcpipguide.com/free/t_HTTPRequestMessageFormat.htm) [tcpipguide]

- HTTP Status code : μ‘λ‹µ μ²λ¦¬μ— λ€ν• κ²°κ³Ό (200 OK = μ •μƒ)
- Message Body: μ”μ²­ν• νμΌμ λ‚΄μ©

## HTTPS

HTTP λ” μ •λ³΄λ¥Ό ν…μ¤νΈλ΅ μ£Όκ³  λ°›κΈ° λ•λ¬Έμ— λ„¤νΈμ›ν¬μ—μ„ μ „μ†΅ μ‹ νΈλ¥Ό κ°€λ΅μ± κ°€λ¥μ„±μ΄ μ΅΄μ¬ν•λ©°, λ°μ΄ν„° μ μ¶μ΄ λ°μƒν•  μ μλ” λ³΄μ• μ·¨μ•½μ μ΄ μλ‹¤.

λ°μ΄ν„° μ μ¶μ΄ λ°μƒν•  μ μλ” μ΄μ λ” ν¨ν‚·μ΄ μ”μ²­ν• μ„λ²„μ— λ„λ‹¬ν•κΈ° μ„ν•΄ κ±°μ³κ°€μ•Ό ν•λ” μ λ§μ€ κ³µμ κΈ°, λ„¤νΈμ›ν¬ μ¥λΉ„κ°€ μ΅΄μ¬ν•κΈ° λ•λ¬Έμ΄λ‹¤.

![4.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/4.png)

μ¶μ²: [Traceroute in Network Layer](https://www.geeksforgeeks.org/traceroute-in-network-layer/) [geeksforgeeks]

λ„κµ°κ°€ ν¨ν‚· λ‚΄λ¶€λ¥Ό ν™•μΈν•΄μ„ λ―Όκ°ν• κ°μΈ μ •λ³΄λ¥Ό κ°€λ΅μ± μλ„ μκ³ , ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„λ” λ„κµ°κ°€ ν¨ν‚· λ‚΄λ¶€λ¥Ό ν™•μΈν–λ”μ§€ μ—¬λ¶€λ¥Ό μ• μ μ—†λ‹¤λ” λ¬Έμ μ μ΄ μλ‹¤.

λλ”, μ¤‘κ°„μ— λ„κµ°κ°€ μ„λ²„μΈμ²™ μ„μ¥ν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ ν¨ν‚·μ„ κ°€λ΅μ±„μ„ μ‘λ‹µμ„ λ³΄λ‚΄μ¤„ μλ„ μλ‹¤. ([ARP μ¤ν‘Έν•‘](https://namu.wiki/w/ARP%20%EC%8A%A4%ED%91%B8%ED%95%91))

μ‹¤μ λ΅ macOS ν™κ²½μ—μ„ κµ¬κΈ€ μ„λ²„ IP μ£Όμ†μΈ 8.8.8.8 μ— μ”μ²­μ„ λ³΄λ‚΄λ³΄λ©΄ μ λ§μ€ κ²½λ΅λ¥Ό κ±°μ³κ°€λ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.

```bash
$ traceroute 8.8.8.8
traceroute to 8.8.8.8 (8.8.8.8), 64 hops max, 52 byte packets
1  10.31.254.254 (10.31.254.254)  1.076 ms  0.595 ms  0.510 ms
2  nat (10.60.1.1)  0.168 ms  0.169 ms  0.231 ms
3  * * *
4  112.189.14.85 (112.189.14.85)  0.766 ms  0.623 ms
  112.189.13.85 (112.189.13.85)  0.857 ms
5  * * *
6  112.174.90.10 (112.174.90.10)  8.583 ms
  112.174.90.62 (112.174.90.62)  5.806 ms
  112.174.90.38 (112.174.90.38)  7.515 ms
7  112.174.84.18 (112.174.84.18)  7.874 ms
  112.174.84.14 (112.174.84.14)  6.282 ms
  112.174.84.30 (112.174.84.30)  6.419 ms
8  142.250.165.78 (142.250.165.78)  28.176 ms
  72.14.243.228 (72.14.243.228)  32.753 ms
  142.250.165.78 (142.250.165.78)  28.055 ms
9  * * *
10  dns.google (8.8.8.8)  29.805 ms  31.165 ms  30.371 ms
```

μ΄μ²λΌ HTTP κ°€ κ°€μ§„ λ¬Έμ μ μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ HTTP μ— SSL(Secure Socket Layer)μ„ μ¶”κ°€ν• κ²ƒμ΄ HTTPS μ΄λ‹¤.

HTTPS λ¥Ό μ‚¬μ©ν•λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ λ¨λ“  ν†µμ‹  λ‚΄μ©μ΄ μ•”νΈν™”λλ‹¤.

# SSL(Secure Socket Layer)

SSL μ€ λ„·μ¤μΌ€μ΄ν”„μ—μ„ κ°λ°ν• μΈν„°λ„· λ³΄μ• ν”„λ΅ν† μ½μ΄λ‹¤.

SSL 1.0 μ€ κ³µκ°λμ§€ μ•μ•μ§€λ§, SSL 2.0 μ€ 1995λ…„μ—, SSL 3.0 μ€ 1996λ…„μ— λ°ν‘λμ—λ‹¤.

SSL μ€ κΈ°μ—…μ΄ λ§λ“  ν”„λ΅ν† μ½μ΄κΈ° λ•λ¬Έμ— λ…μ μ μ°λ ¤κ°€ μμ—κ³ , μΈν„°λ„· κ΄€λ ¨ κΈ°μ μ„ ν‘μ¤€ν™”ν•λ” IETF μ—μ„ SSL 3.0 μ„ TLS 1.0 λ΅ λ°ν‘ν•μ€λ‹¤. (TLS : Transport Layer Security μ μ¤„μ„λ§)

SSL λ° TLS μ λ²„μ „ λ°ν‘ μ—°λ„λ” μ•„λμ™€ κ°™λ‹¤.

| λ²„μ „ | μ—°λ„ |
| --- | --- |
| SSL 1.0 | ? |
| SSL 2.0 | 1995 |
| SSL 3.0 | 1996 |
| TLS 1.0 | 1999 |
| TLS 1.1 | 2006 |
| TLS 1.2 | 2008 |
| TLS 1.3 | 2018 |

μ—„λ°€ν λ§ν•λ©΄ SSL μ€ TLS μ™€ λ‹¤λ¥΄μ§€λ§, ν° νλ¦„μ—μ„ λ³΄μ•μ„ λ• TLS κ°€ SSL μ„ κ³„μΉν–λ‹¤λ” μ μ—μ„ TLS μ™€ SSL μ€ λ™μΌν• μλ―Έμ—μ„ μ‚¬μ©ν•κ³  μλ‹¤.

![5.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/5.png)

μ¶μ²: [SSL/TLS μ™€ HTTPS](https://www.lesstif.com/ws/ssl-tls-https-43843962.html) [lessif]

TLS λ” μ „μ†΅ κ³„μΈµ(Transport layer)μ μ•”νΈν™” λ°©μ‹μ΄κΈ° λ•λ¬Έμ— HTTP λΏλ§ μ•„λ‹λΌ FTP, XMPP λ“± μ‘μ© κ³„μΈµ ν”„λ΅ν† μ½μ μΆ…λ¥μ— μƒκ΄€μ—†μ΄ μ‚¬μ©ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤. λν• μΈμ¦, μ•”νΈν™”, λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•λ‹¤.

- μ•”νΈν™” : λ°μ΄ν„°λ¥Ό μ  3μκ°€ λ³Ό μ μ—†λ„λ΅ μ¨κΈ΄λ‹¤.
- μΈμ¦ : μ •λ³΄λ¥Ό κµν™ν•λ” λ‹Ήμ‚¬μκ°€ μ •λ³΄λ¥Ό μ”μ²­ν• λ‹Ήμ‚¬μμ„μ„ λ³΄μ¥ν•λ‹¤.
- λ¬΄κ²°μ„± : λ°μ΄ν„°κ°€ λ°”λ€μ§€ μ•κ³  μ›λ³Έ κ·Έλ€λ΅ μ „λ‹¬

## TLS Handshake

μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ „μ— μ„λ΅ μ—°κ²°ν•  μ μλ” μƒνƒμΈμ§€ ν™•μΈν•΄μ•Ό ν•λ‹¤.

μ΄λ¥Ό Handshake(μ•…μ) λΌ ν•λ©°, TLS λ” μ•„λμ™€ κ°™μ€ κ³Όμ •μ„ κ±°μ³ μ—°κ²°μ΄ μ΄λ£¨μ–΄μ§„λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μΈμ¦μ„λ¥Ό λ°›μ•„ μ„λ²„μ λ¬΄κ²°μ„±μ„ ν™•μΈν•λ‹¤. λ§μ•½, μ‹ λΆ°ν•  μ μλ” μ„λ²„λΌλ” κ²ƒμ„ ν™•μΈν•λ©΄ ν΄λΌμ΄μ–ΈνΈλ” μ•”νΈν™” ν†µμ‹ μ— μ‚¬μ©ν•  λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•μ—¬ μ „λ‹¬ν•λ‹¤. μ΄ κ³Όμ •μ„ TLS Handshake μ΄λ‹¤.

![6.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/6.png)

μ¶μ²: [TLS(SSL) - 3. Handshake](https://babbab2.tistory.com/7) [ν‹°μ¤ν† λ¦¬]

TLS λ¥Ό μ΄μ©ν• ν†µμ‹ μ€ μ„μ κ·Έλ¦Όκ³Ό κ°™μ€ κ³Όμ •μ„ κ±°μ³μ„ μ΄λ£¨μ–΄μ§„λ‹¤.

### 1. ClientHello

ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— ClientHello λ©”μ„Έμ§€λ¥Ό μ „μ†΅ν•λ‹¤. ν¨ν‚·μ—λ” μ•„λμ™€ κ°™μ€ μ •λ³΄λ“¤μ΄ λ‹΄κΈ΄λ‹¤.

- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‚¬μ©ν•λ” TLS λ²„μ „
- Cipher Suites(ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹) : μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹μ΄ λ‹¤λ¥Ό μ μκΈ° λ•λ¬Έμ— handshake λ¥Ό ν†µν•΄ μ–΄λ–¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•  μ§€ μ •ν•λ‹¤. κµ¬μ²΄μ μΌλ΅λ” μ•„λμ™€ κ°™μ€ ν•­λ©λ“¤μ΄ ν¬ν•¨λλ‹¤.

    ```bash
    SSL/TLS_(A)_(B)_WITH_(C)_(D)_(E)
    - (A) : ν‚¤ κµν™ μ•”νΈ μ•κ³ λ¦¬μ¦
    - (B) : μΈμ¦ μ•κ³ λ¦¬μ¦
    - (C) : λ€μΉ­ μ•”νΈ μ•κ³ λ¦¬μ¦
    - (D) : λΈ”λ΅ μ•”νΈ μ΄μ© λ°©μ‹
    - (E) : ν•΄μ‹ μ•κ³ λ¦¬μ¦
    ```

    - ν‚¤ κµν™ μ•κ³ λ¦¬μ¦ : μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ ν‚¤λ¥Ό κµν™ν•λ” μ•κ³ λ¦¬μ¦
    - μΈμ¦ μ•κ³ λ¦¬μ¦ : μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ κµν™ν• μΈμ¦μ„λ¥Ό ν™•μΈν•λ” μ•κ³ λ¦¬μ¦
    - λ€μΉ­ μ•”νΈ μ•κ³ λ¦¬μ¦ : μ‹¤μ  λ°μ΄ν„°λ¥Ό μ•”νΈν™” ν•λ” μ•κ³ λ¦¬μ¦
    - λΈ”λ΅ μ•”νΈ μ΄μ© λ°©μ‹ : λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•  λ• ν•λ²μ— μ•”νΈν™” ν•μ§€ μ•κ³  λΈ”λ΅ λ‹¨μ„λ΅ ν•λ”λ°, λΈ”λ΅λ μ•”νΈν™” ν¨ν‚·μ„ μ΅°ν•©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ¶”μΈ΅ν•λ” κ²ƒμ„ λ°©μ§€ν•κΈ° μ„ν• λ°©μ‹
    - ν•΄μ‹ μ•κ³ λ¦¬μ¦ : μ„λ΅ μƒλ€λ°©μ΄ μ•”νΈν™”ν• κ²ƒμ΄ λ§λ”μ§€ ν™•μΈν•λ” μ•κ³ λ¦¬μ¦
- Client Random Data(ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±ν• λ‚μ. λ€μΉ­ν‚¤ μƒμ„± μ‹ μ‚¬μ©)
- μ„Έμ… ID : λ™μΌν• ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ§¤λ² Handshake λ¥Ό ν•λ‹¤λ©΄ λ§μ€ μ‹κ°„μ΄ μ†μ”λ  κ²ƒμ΄λ‹¤. κ·Έλμ„ μµμ΄μ Handshake λ§ Full handshake(μ„λ²„ μΈμ¦μ„ ν™•μΈ, μ•”νΈν™” λ°©μ‹ μ„ μ •, λ€μΉ­ν‚¤ κµν™ λ“±)λ¥Ό μν–‰ν•κ³ , μ΄ν›„μ—λ” μ„Έμ… ID λ§ ν™•μΈν•΄μ„ ν†µμ‹ μ„ ν•λ‹¤.

![7.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/7.png)

    μ¶μ²: [TLS(SSL) - 3. Handshake](https://babbab2.tistory.com/7) [ν‹°μ¤ν† λ¦¬]

    - μµμ΄ Handshake μ—μ„ ν΄λΌμ΄μ–ΈνΈμ μ„Έμ… ID λ” 0 μ΄λ‹¤.
    - μ΄ν›„ ServerHello λ©”μ„Έμ§€λ¥Ό ν†µν•΄ μ„λ²„λ” μ„Έμ… ID λ¥Ό λ³΄λ‚Έλ‹¤.
    - ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„κ°€ λ³΄λ‚Έ μ„Έμ… ID λ¥Ό λ΅μ»¬μ— μ €μ¥ν•λ‹¤.
    - μ΄ν›„ κ°™μ€ μ„λ²„μ™€ Handshake λ¥Ό ν•λ©΄, μ΄μ „μ— λ΅μ»¬μ— μ €μ¥ν• μ„Έμ… ID λ¥Ό μ „μ†΅ν•λ‹¤.
    - μ„λ²„λ” μ„Έμ… ID λ¥Ό ν™•μΈν•΄μ„ λ‹¤μ‹ μ‚¬μ©ν•΄λ„ κ΄μ°®μΌλ©΄ ServerHello μ— κ°™μ€ μ„Έμ… ID λ¥Ό λ³΄λ‚Έλ‹¤.
- SNI(Server Name Indication, μ„λ²„ μ΄λ¦„) : μ„λ²„μ μ΄λ¦„(ex. www.naver.com)μ„ ν‘μ‹ν•λ” λ¶€λ¶„μ΄λ‹¤.
    - κΈ°μ΅΄μ—λ” IP μ£Όμ†μ™€ λ„λ©”μΈμ΄ 1:1 λ€μ‘λμ—κΈ° λ•λ¬Έμ— λ¬Έμ κ°€ μ—†μ—λ‹¤.
    - ν•μ§€λ§, μµκ·Όμ—λ” IP μ£Όμ† ν•λ‚μ— μ—¬λ¬ λ„λ©”μΈμ„ μ—°κ²°ν•  μ μκΈ° λ•λ¬Έμ— λ¬Έμ κ°€ λ°μƒν•λ‹¤. μ„λ²„μ—μ„ λ°ν–‰ν• μΈμ¦μ„ ν•λ‚μ— λ¨λ“  λ„λ©”μΈμ„ λ…μ‹ν•λ” κ²ƒμ€ λ¶κ°€λ¥ν•λ©°, λ„λ©”μΈλ§λ‹¤ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ” κ²ƒλ„ λΉ„ν¨μ¨μ μ΄λ‹¤.
    - λ”°λΌμ„ IP μ£Όμ†μ— μ ‘μ†ν•  λ•, μ–΄λ–¤ λ„λ©”μΈμ— μ ‘μ†ν•λ” μ§€ λ…μ‹ν•λ” λ¶€λ¶„μ΄ SNI μ΄λ‹¤.
    - μ΄λ¥Ό μ΄μ©ν•λ©΄ λ¬Όλ¦¬μ μΌλ΅ λ™μΌν• μ„λ²„μ— μ΅΄μ¬ν•λ” κ°κΈ° λ‹¤λ¥Έ λ„λ©”μΈλ“¤μ΄ μ„λ΅ λ‹¤λ¥Έ TLS μΈμ¦μ„λ¥Ό μ μ©ν•  μ μλ‹¤.

### 2. ServerHello

ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ ClientHello μ— λ€ν•΄ μ„λ²„μ—μ„ μ‘λ‹µν•λ” λ©”μ„Έμ§€μ΄λ‹¤.

ν¬ν•¨λλ” μ •λ³΄λ” ClientHello μ™€ μ μ‚¬ν•λ©°, κµ¬μ²΄μ μΌλ΅λ” μ•„λμ™€ κ°™λ‹¤.

- μ„λ²„μ—μ„ μ‚¬μ©ν•λ” TLS λ²„μ „
- Selected Suite : ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ•”νΈν™” λ°©μ‹ μ¤‘μ—μ„ μ„λ²„κ°€ μ‚¬μ© κ°€λ¥ν• μ•”νΈν™” λ°©μ‹μ΄λ‹¤.
- Server Random Data : μ„λ²„μ—μ„ μƒμ„±ν• λ‚μμ΄λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ λ™μΌν•κ² λ€μΉ­ν‚¤λ¥Ό λ§λ“¤κΈ° μ„ν•΄ μ‚¬μ©ν•λ‹¤.
- μ„Έμ… ID : ClientHello μ— μ„Έμ… ID κ°€ 0 μΌλ΅ μ™”λ‹¤λ©΄ μƒλ΅ μ„Έμ… ID λ¥Ό μƒμ„±ν•΄μ„ λ³΄λ‚΄κ³ , 0 μ΄ μ•„λ‹λΌλ©΄ ν•΄λ‹Ή μ„Έμ… ID κ°€ μ ν¨ν•μ§€ ν™•μΈν•κ³  μƒλ΅ λ°κΈ‰ν•΄μ£Όκ±°λ‚ ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ„Έμ… ID λ¥Ό κ·Έλ€λ΅ λ³΄λ‚΄μ¤€λ‹¤.
- SNI : μ„λ²„μ—μ„λ” λΉ„μ›μ„ λ³΄λ‚Έλ‹¤.

### 3. Server Certificate

μ„λ²„μ μΈμ¦μ„λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ” κ³Όμ •μ΄λ‹¤.

μΈμ¦μ„μ μ—­ν• μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­ν• μ„λ²„κ°€ λ§λ”μ§€ λ³΄μ¥ν•λ” κ²ƒμ΄λ‹¤.

μ΄λ¬ν• μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ” κΈ°μ—…λ“¤μ„ CA(Certificate Authority) λλ” Root Certificate λΌκ³  ν•λ‹¤. CA λ” μ‹ λΆ°μ„±μ΄ μ—„κ²©ν•κ² κ³µμΈλ κΈ°μ—…λ“¤λ§ μ°Έμ—¬ν•  μ μλ‹¤.

TLS λ¥Ό ν†µν•΄ μ•”νΈν™” ν†µμ‹ μ„ μ κ³µν•λ ¤λ” μ„λΉ„μ¤λ” CA λ¥Ό ν†µν•΄ μΈμ¦μ„λ¥Ό κµ¬μ…ν•΄μ•Ό ν•λ‹¤.

λ§μ•½ κ°λ° λλ” μ‚¬μ μΈ λ©μ μ„ μ„ν•΄ TLS λ¥Ό μ΄μ©ν•κ³ μ ν•λ‹¤λ©΄, μμ‹ μ΄ μ§μ ‘ CA μ—­ν• μ„ ν•  μλ„ μλ‹¤. ν•μ§€λ§ κ³µμΈλ μΈμ¦μ„κ°€ μ•„λ‹κΈ° λ•λ¬Έμ— λΈλΌμ°μ €μ—μ„λ” μ•„λμ™€ κ°™μ€ κ²½κ³ λ¥Ό λ„μΈ μ μλ‹¤.

![8.png](/assets/images/2023/2023-04-05-http-https-ssl-tls/8.png)

μ¶μ²: [HTTPSμ™€ SSL μΈμ¦μ„](https://www.opentutorials.org/course/228/4894) [μƒν™μ½”λ”©]

μΈμ¦μ„μ—λ” μ•„λμ™€ κ°™μ€ μ •λ³΄κ°€ ν¬ν•¨λμ–΄ μλ‹¤.

1. μ„λΉ„μ¤μ μ •λ³΄ : μΈμ¦μ„λ¥Ό λ°κΈ‰ν• CA, μ„λΉ„μ¤μ λ„λ©”μΈ λ“±
2. μ„λ²„ μΈ΅ κ³µκ°ν‚¤ : κ³µκ°ν‚¤μ λ‚΄μ©, κ³µκ°ν‚¤μ μ•”νΈν™” λ°©λ²•

1λ²μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μλ„ν• μ„λ²„κ°€ λ§λ”μ§€μ— λ€ν• λ‚΄μ©μ΄ λ‹΄κ²¨μλ‹¤.

2λ²μ€ μ„λ²„μ™€ ν†µμ‹ ν•  λ• μ‚¬μ©ν•  κ³µκ°ν‚¤μ™€ κ·Έ κ³µκ°ν‚¤μ μ•”νΈν™” λ°©λ²•λ“¤μ μ •λ³΄λ¥Ό λ‹΄κ³  μλ‹¤.

μ„μ μ •λ³΄λ“¤μ€ μ„λΉ„μ¤κ°€ CA λ΅λ¶€ν„° μΈμ¦μ„λ¥Ό κµ¬μ…ν•  λ• μ μ¶ν•΄μ•Ό ν•λ©°, CA μ— μν•΄ μ•”νΈν™” λλ‹¤.

μ΄λ• μ‚¬μ©ν•λ” μ•”νΈν™” κΈ°λ²•μ€ κ³µκ°ν‚¤ λ°©μ‹μ΄λ‹¤. CA λ” μμ‹ μ CA λΉ„κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ„λ²„κ°€ μ μ¶ν• μΈμ¦μ„λ¥Ό μ•”νΈν™” ν•λ‹¤.

λΈλΌμ°μ €λ” λ‚΄λ¶€μ μΌλ΅ CA μ λ¦¬μ¤νΈλ¥Ό λ―Έλ¦¬ νμ•…ν•κ³  μλ‹¤.

μ¦‰, λΈλΌμ°μ € μ†μ¤ μ½”λ“ μ•μ—λ” CA μ λ¦¬μ¤νΈκ°€ λ“¤μ–΄μλ‹¤λ” κ²ƒμ΄λ‹¤. λΈλΌμ°μ €κ°€ λ―Έλ¦¬ νμ•…ν•κ³  μλ” CA μ λ¦¬μ¤νΈμ— ν¬ν•¨λμ–΄μ•Όλ§ κ³µμΈλ CA κ°€ λ  μ μλ‹¤.

κ·Έλμ„ λΈλΌμ°μ €λ” CA μ λ¦¬μ¤νΈμ™€ ν•¨κ» CA μ κ³µκ°ν‚¤λ¥Ό μ΄λ―Έ μ•κ³  μλ‹¤.

ν΄λΌμ΄μ–ΈνΈμ λΈλΌμ°μ €λ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ μΈμ¦μ„κ°€ κ³µμΈλ CA λ©λ΅μ— μλ”μ§€ ν™•μΈν•κ³ , λΈλΌμ°μ €κ°€ κ°€μ§€κ³  μλ” κ³µκ°ν‚¤λ΅ μΈμ¦μ„λ¥Ό λ³µνΈν™” ν•λ‹¤. λ³µνΈν™” λ μΈμ¦μ„μ—λ” μ„λ²„μ κ³µκ°ν‚¤κ°€ λ‹΄κ²¨μλ‹¤.

κ·Έλ¬λ©΄ μ΄μ „μ— μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ‚μμ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μƒμ„±ν• λ‚μλ¥Ό μ΅°ν•©ν•κ³  pre master secret λΌλ” ν‚¤λ¥Ό μƒμ„±ν•λ‹¤. μ΄λ” μ•μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ•”νΈν™” ν†µμ‹ μ— μ‚¬μ©ν•  λ€μΉ­ν‚¤μ μ¬λ£κ°€ λλ” ν‚¤μ΄λ‹¤.

### 4. Server Hello Done

μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό λ©”μ„Έμ§€λ¥Ό λ¨λ‘ λ³΄λƒλ‹¤λ” μλ―Έμ΄λ‹¤.

### 5. Client Key Exchange

ν΄λΌμ΄μ–ΈνΈλ” 3λ²μ—μ„ λ§λ“  pre master secret ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ μ„λ²„μ— μ „μ†΅ν•λ‹¤.

### 6. Key Generation

μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ „μ†΅ν• pre master secret ν‚¤λ¥Ό μ„λ²„μ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•λ‹¤. κ·Έλ¦¬κ³  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μΌλ ¨μ κ³Όμ •μ„ κ±°μ³μ„ pre master secret ν‚¤λ¥Ό master secret ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.

master secret λ” session key λ¥Ό μƒμ„±ν•λ”λ°, session key λ¥Ό μ΄μ©ν•΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” ν†µμ‹ μ„ μ•”νΈν™” ν•λ”λ° μ‚¬μ©ν•λ‹¤.

### 7. Cipher Spec Exchange

μ΄μ  μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μ£Όκ³  λ°›λ” λ¨λ“  λ©”μ„Έμ§€λ” μ •ν•΄μ§„ μ•κ³ λ¦¬μ¦κ³Ό session key λ¥Ό μ΄μ©ν•΄μ„ μ•”νΈν™” ν•κ² λ‹¤κ³  μ„λ΅ μ•λ ¤μ¤€λ‹¤.

### 8. Finished

κ·Έ λ‹¤μ Finished λ©”μ„Έμ§€λ¥Ό λ³΄λ‚΄μ„ κ°μ handshake κ³Όμ •μ΄ λλ‚¬μμ„ μ•λ¦°λ‹¤.

# μ°Έκ³ μλ£

- [HTTP κ°λ… λ° μ£Όμ” λ‚΄μ© μ •λ¦¬](https://seunghyun90.tistory.com/41) [ν‹°μ¤ν† λ¦¬]
- [HTTPSλ€? (λ™μ‘λ°©μ‹, μ¥λ‹¨μ )](https://rachel-kwak.github.io/2021/03/08/HTTPS.html) [github.io]
- [[10λ¶„ ν…μ½”ν†΅] π‘¶μ—λ‹¨μ TLS](https://youtu.be/EPcQqkqqouk) [youtube]
- [IP/ARP μ¤ν‘Έν•‘ (Spoofing)κ³µκ²©μ€ λ¬΄μ—‡μ΄λ©° κ³µκ²©μ€ μ–΄λ–»κ² μ‹¤ν–‰λλ”μ§€λ¥Ό ν•™μµν•©λ‹λ‹¤.](https://m.blog.naver.com/brickbot/220441375126) [λ„¤μ΄λ²„ λΈ”λ΅κ·Έ]
- [SSL (secure sockets layer)](https://www.techtarget.com/searchsecurity/definition/Secure-Sockets-Layer-SSL) [TechTarget]
- [TLS Handshakeλ” μ–΄λ–»κ² μ§„ν–‰λλ”κ°€? | Session Key](https://sunrise-min.tistory.com/entry/TLS-Handshake%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A7%84%ED%96%89%EB%90%98%EB%8A%94%EA%B0%80) [ν‹°μ¤ν† λ¦¬]
- [SSL/TLS, Cipher suiteλ€?](https://run-it.tistory.com/30) [ν‹°μ¤ν† λ¦¬]
- [HTTPSμ™€ SSL μΈμ¦μ„](https://www.opentutorials.org/course/228/4894) [μƒν™μ½”λ”©]
- [TLS(SSL) - 3. Handshake](https://babbab2.tistory.com/7) [ν‹°μ¤ν† λ¦¬]