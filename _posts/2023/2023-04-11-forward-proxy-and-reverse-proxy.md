---
title: "Forward Proxyμ™€ Reverse Proxy"
date: 2023-04-11 10:00:00 +0900
categories: [nginx]
tags: [nginx]
---

# ν”„λ΅μ‹(Proxy)λ€?

ν”„λ΅μ‹λ” μ‚¬μ „μ μΈ μλ―Έλ΅ β€λ€λ¦¬μΈβ€™, β€μ¤‘κ°μβ€™ λΌλ” μλ―Έλ¥Ό κ°€μ§€κ³  μλ‹¤.

μ»΄ν“¨ν„° κ³µν•™μ—μ„ ν”„λ΅μ‹λ” λ³΄μ•μƒμ λ¬Έμ λ΅ μ§μ ‘ ν†µμ‹ μ„ μ£Όκ³  λ°›μ„ μ μ—†λ” λ‘ PC μ‚¬μ΄μ—μ„ ν†µμ‹ μ„ μ¤‘κ³„ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤.

μ΄μ²λΌ μ¤‘κ³„ κΈ°λ¥μ„ μν–‰ν•λ” μ„λ²„λ¥Ό β€ν”„λ΅μ‹ μ„λ²„β€™λΌκ³  ν•λ‹¤.

![1.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/1.png)

μ¶μ²: [What is a Proxy Server? How does it work?](https://www.fortinet.com/resources/cyberglossary/proxy-server) [fortinet]

λ³΄ν†µ μ›Ή μ„λΉ„μ¤λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ”λ‹¤.

μ΄λ• μ¤‘λ³µλλ” λ°μ΄ν„°λ¥Ό λ°λ³µν•΄μ„ μ „λ‹¬ν•λ” μƒν™©μ΄ λ°μƒν•  μ μλ”λ°, λ™μΌν• μ”μ²­μ„ λ§¤λ² μ²λ¦¬ν•λ” κ²ƒμ€ λ¦¬μ†μ¤ λ‚­λΉ„μ™€ μ„λ²„μ λ¶€ν•λ΅ μ΄μ–΄μ§„λ‹¤.

κ·Έλμ„ λ³Έ μ„λ²„μ— λ„λ‹¬ν•κΈ° μ „μ— μƒλ΅μ΄ μ„λ²„(proxy server)λ¥Ό λ―Έλ¦¬ λ°°μΉν•΄μ„ μ¤‘λ³µ μ”μ²­μ— λ€ν•΄, νΉν μ—°μ‚°μ΄ ν•„μ”μ—†λ” μ”μ²­μ—λ” λ™μΌν• μ‘λ‹µμ„ ν•λ„λ΅ ν•λ‹¤. κ·Έλ¬λ©΄ ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„λ” λΉ λ¥΄κ² μ”μ²­μ„ λ°›μ•„λ³Ό μ μκ³ , μ„λ²„ μ…μ¥μ—μ„ λ λ¶ν•„μ”ν• λ¶€ν•λ¥Ό μ¤„μ΄λ” ν¨κ³Όλ¥Ό λ„λ¦΄ μ μλ‹¤.

ν”„λ΅μ‹ μ„λ²„λ” μ„λ²„κ°€ μ–΄λ””μ— μ„μΉν•΄μλ”μ§€μ— λ”°λΌ ν¬μ›λ“ ν”„λ΅μ‹μ™€ λ¦¬λ²„μ¤ ν”„λ΅μ‹λ΅ λ‚λ‰λ‹¤. ν”„λ΅μ‹μ μΆ…λ¥μ— λ”°λΌ μ‚¬μ©ν•λ” λ©μ κ³Ό μν–‰ν•λ” μ—­ν• λ„ ν•¨κ» λ‹¬λΌμ§„λ‹¤.

# ν¬μ›λ“ ν”„λ΅μ‹ (Forward Proxy)

ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ΅ μμ›μ„ μ”μ²­ν•  λ•, μ§μ ‘ μ”μ²­ν•μ§€ μ•κ³  ν”„λ΅μ‹ μ„λ²„λ¥Ό κ±°μ³ μ”μ²­ν•λ” μ„λ²„λ¥Ό ν¬μ›λ“ ν”„λ΅μ‹λΌκ³  ν•λ‹¤. ν¬μ›λ“ ν”„λ΅μ‹λ” ν΄λΌμ΄μ–ΈνΈ μ•μ— μ„μΉν•κ³  μλ‹¤.

![2.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/2.png)

μ¶μ²: [ν¬μ›λ“ ν”„λ΅μ‹(forward proxy) λ¦¬λ²„μ¤ ν”„λ΅μ‹(reverse proxy) μ μ°¨μ΄](https://www.lesstif.com/system-admin/forward-proxy-reverse-proxy-21430345.html) [lesstif]

μλ¥Ό λ“¤μ–΄, ν΄λΌμ΄μ–ΈνΈκ°€ `google.com` μ— μ ‘μ†ν•κ³ μ ν•λ” κ²½μ°, ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ `google.com` μ— μ”μ²­ν•λ” κ²ƒμ΄ μ•„λ‹λΌ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ λ°›μ•„μ„ λ€μ‹  `google.com` μ— μ”μ²­ν•λ” κ²ƒμ΄λ‹¤. κ·Έλ¦¬κ³  μ„λ²„μ μ‘λ‹µμ„ λ‹¤μ‹ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„κ°€ λ°›μ•„μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬(forward)ν•λ” μ—­ν• μ„ μν–‰ν•λ‹¤.

## μ™ μ‚¬μ©ν•λ”κ°€?

ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ μ„λ²„μ— μ”μ²­μ„ μν–‰ν•λ©΄ λλ”λ°, κµ³μ΄ μ¤‘κ°„μ—μ„ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„κ°€ λ€μ‹  μ „λ‹¬ν•΄μ£Όλ” μ΄μ λ” λ¬΄μ—‡μΌκΉ?

### μ ‘μ† μ ν•

λ³΄μ•μƒμ μ΄μ λ΅ μΌλ¶€ μ •λ¶€, ν•™κµ, κΈ°μ—…μ—μ„λ” λ°©ν™”λ²½μ„ μ΄μ©ν•΄μ„ μ‚¬λ‚΄λ§μ΄ μ•„λ‹ μ™Έλ¶€μ νΉμ • μ‚¬μ΄νΈμ— μ ‘μ†ν•λ” κ²ƒμ„ λ§‰κ³  μλ‹¤.

μ¦‰, ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„λ” λ°©ν™”λ²½κ³Ό κ°™μ€ κ°λ…μΌλ΅ λ„¤νΈμ›ν¬ μ ‘μ† μ ν•μ„ μ„ν•΄ μ‚¬μ©ν•λ‹¤.

### μΊμ‹± (Caching)

μ–΄λ–¤ μ›Ή νμ΄μ§€μ— μ ‘κ·Όν•λ©΄ ν”„λ΅μ‹ μ„λ²„λ” ν•΄λ‹Ή νμ΄μ§€ μ„λ²„μ μ •λ³΄λ¥Ό μ„μ‹λ΅ λ³΄κ΄€(μΊμ‹±)ν•λ‹¤.

κ·Έλμ„ ν”„λ΅μ‹ μ„λ²„λ” λ™μΌν• νμ΄μ§€μ— λ€ν• μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ μΊμ‹±ν• λ°μ΄ν„°(νμ΄μ§€)λ¥Ό κ·Έλ€λ΅ λ°ν™ν•λ”λ°, λ•λ¶„μ— μ„λ²„μ λ¶€ν•λ¥Ό μ¤„μ΄λ” ν¨κ³Όκ°€ μƒκΈ΄λ‹¤.

### μ•”νΈν™” (Encryption)

ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ€ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µκ³Όν•  λ• ν΄λΌμ΄μ–ΈνΈμ IP λ¥Ό μ¨κΈΈ μ μλ‹¤.

ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ μ”μ²­ν•λ” ν¨ν‚·μ ν—¤λ”μ—λ” `Via` ν—¤λ” λλ” `X-Forwarded-For` ν—¤λ”κ°€ λ¶™λ”λ‹¤.

- `Via` ν—¤λ” : ν”„λ΅μ‹ μ„λ²„μ μΆ…λ¥λ¥Ό ν‘μ‹ν•λ‹¤.
- `X-Forwarded-For` ν—¤λ” : μ²μ μ”μ²­μ„ λ³΄λ‚Έ ν΄λΌμ΄μ–ΈνΈμ IP λ¥Ό ν‘μ‹ν•λ‹¤.

κ·Έλ¦¬κ³  ν”„λ΅μ‹μ μΆ…λ¥μ— λ”°λΌ ν—¤λ”κ°€ λ‹¤λ¥΄κ² λ¶™λ”λ‹¤.

- Transparent : μ”μ²­ ν—¤λ”μ— `Via`, `X-Forwarded-For` ν—¤λ”λ¥Ό λ¶™μ—¬μ„ ν΄λΌμ΄μ–ΈνΈμ IP λ¥Ό μ¶”μ ν•  μ μλ‹¤.
- Anonymous : `Via` ν—¤λ”λ§ ν¬ν•¨ν•΄μ„ λ³΄λ‚΄κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈμ IP λ¥Ό μ¶”μ ν•  μ μ—†λ‹¤.
- High anonymous : μ„μ λ‘ ν—¤λ”λ¥Ό λ¨λ‘ ν¬ν•¨ν•μ§€ μ•κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈμ IP λΏλ§ μ•„λ‹λΌ ν”„λ΅μ‹ μ‚¬μ© μ—¬λ¶€λ¥Ό μ• μ μ—†λ‹¤. μΌλ° ν¨ν‚·κ³Ό κµ¬λ³„ν•  μ μ—†μΌλ©°, ν„μ¬ κΈ°μ λ ¥μΌλ΅λ” μ„λ²„κ°€ High anonymous ν”„λ΅μ‹ μ‚¬μ© μ—¬λ¶€λ¥Ό κµ¬λ³„ν•  μ μ—†λ‹¤.

κ·Έλμ„ Transparent ν”„λ΅μ‹κ°€ μ•„λ‹λΌλ©΄ μ„λ²„μ—μ„ IP μ£Όμ†λ¥Ό μ—­μ¶”μ ν•΄λ„ μ‹¤μ  μ”μ²­μ„ λ³΄λ‚Έ ν΄λΌμ΄μ–ΈνΈμ μ •μ²΄λ¥Ό ν™•μΈν•κΈ° μ–΄λ µλ‹¤.

# λ¦¬λ²„μ¤ ν”„λ΅μ‹ (Reverse Proxy)

![3.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/3.png)

μ¶μ²: [[network] ν”„λ΅μ‹(proxy)λ€, forward proxyμ™€ reverse proxy](https://sujinhope.github.io/2021/06/13/Network-%ED%94%84%EB%A1%9D%EC%8B%9C(Proxy)%EB%9E%80,-Forward-Proxy%EC%99%80-Reverse-Proxy.html) [gitub.io]

λ¦¬λ²„μ¤ ν”„λ΅μ‹λ” ν¬μ›λ“ ν”„λ΅μ‹μ λ°λ€λλ” κ°λ…μ΄λ‹¤.

λ¦¬λ²„μ¤ ν”„λ΅μ‹λ” μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„μ μ•μ— μ„μΉν•λ©°, ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄λ©΄ λ¦¬λ²„μ¤ ν”„λ΅μ‹κ°€ μ„λ²„ λ€μ‹  μ”μ²­μ„ λ°›λ”λ‹¤. κ·Έλ¦¬κ³  λ¦¬λ²„μ¤ ν”„λ΅μ‹κ°€ μ„λ²„λ΅ μ”μ²­μ„ λ€μ‹  λ³΄λ‚΄κ³ , μ‘λ‹µμ„ λ°›μ•„μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•΄μ¤€λ‹¤.

μ΄μ²λΌ ν΄λΌμ΄μ–ΈνΈλ” ν”„λ΅μ‹ μ„λ²„λ¥Ό νΈμ¶ν•κΈ° λ•λ¬Έμ— μ‹¤μ  μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„λ¥Ό κ°μ¶”λ” μ—­ν• μ„ ν•λ‹¤.

## μ™ μ‚¬μ©ν•λ”κ°€?

### λ΅λ“ λ°Έλ°μ‹±(Load Balancing)

λ§μ€ νΈλν”½μΌλ΅ μΈν•΄ λ¶€ν•κ°€ κ±Έλ¦° μ„λ²„λ¥Ό μ •μƒμ μΌλ΅ μ‘λ™μ‹ν‚¤κΈ° μ„ν•΄μ„λ” ν¬κ² 2κ°€μ§€ λ°©λ²•μ΄ μλ‹¤.

![4.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/4.png)

μ¶μ²: [μ»΄ν“¨ν„°μ μ„±λ¥μ„ λ†’μ΄λ” λ°©λ²• - μ¤μΌ€μΌμ—…(scale up)κ³Ό μ¤μΌ€μΌ μ•„μ›ƒ(scale out)](https://butter-shower.tistory.com/109) [ν‹°μ¤ν† λ¦¬]

μ²« λ²μ§Έ λ°©λ²•μ€ μ„λ²„ μ»΄ν“¨ν„°μ μ„±λ¥μ„ λ†’μ—¬μ£Όλ” μ¤μΌ€μΌ μ—…(Scale-up)μ΄λ‹¤.

CPUλ‚ RAMμ„ ν„μ¬ μ‚¬μ©ν•λ” κ²ƒλ³΄λ‹¤ λ” μΆ‹μ€ μ„±λ¥μ λ¶€ν’μΌλ΅ κµμ²΄ν•κ±°λ‚, RAMμ΄λ‚ μ €μ¥ μ¥μΉ(SSD, HDD)λ¥Ό μ¶”κ°€λ΅ μ¥μ°©ν•λ” λ°©λ²•μ΄λ‹¤.

ν•μ§€λ§ μ„λ²„ μ»΄ν“¨ν„° 1λ€μ μ„±λ¥μ„ μµλ€μΉλ” μ •ν•΄μ Έ μκΈ° λ•λ¬Έμ— ν•κ³„κ°€ μ΅΄μ¬ν•λ‹¤.

κ·Έλμ„ λ‘ λ²μ§Έ λ°©λ²•μΌλ΅ μ„λ²„ μ»΄ν“¨ν„°λ¥Ό μ—¬λ¬ λ€ μ—°κ²°ν•΄μ„ νΈλν”½μ„ κ° μ»΄ν“¨ν„°μ— λ‚λ„μ–΄ μ „λ‹¬ν•΄μ£Όλ” μ¤μΌ€μΌ μ•„μ›ƒ(Scale-out)μ΄ μλ‹¤.

μ¤μΌ€μΌ μ•„μ›ƒμ„ ν†µν•΄ ν•λ‚μ μ„λ²„κ°€ κ°λ‹Ήν•΄μ•Ό ν–λ λ¶€λ‹΄μ„ μ—¬λ¬ λ€μ μ„λ²„λ΅ λ‚λ„μ–΄μ£Όλ” λ΅λ“ λ°Έλ°μ‹±μ„ κµ¬ν„ν•  μ μλ‹¤.

![5.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/5.png)

μ¶μ²: [What Is Load Balancing?](https://www.nginx.com/resources/glossary/load-balancing/) [nginx]

λ΅λ“ λ°Έλ°μ‹±μ μ•κ³ λ¦¬μ¦μ—λ” μΆ…λ¥κ°€ μ—¬λ¬ κ°€μ§€κ°€ μλ‹¤.

1. λΌμ΄λ“ λ΅λΉ (Round robin)
    - ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μ—¬λ¬ λ€μ μ„λ²„μ— μμ°¨μ μΌλ΅ λ¶„λ°°ν•λ” λ°©μ‹μ΄λ‹¤. μ΄ 3λ€μ μ„λ²„κ°€ μμΌλ©΄, 1-2-3-1-2-3β€¦ κ³Ό κ°™μ€ λ°©μ‹μΌλ΅ λ¶„λ°°ν•λ‹¤.
    - μ¶”κ°€μ μΈ κ³„μ‚°μ„ ν•μ§€ μ•κ³  λ“¤μ–΄μ¨ μ”μ²­μ„ λΉ λ¥΄κ² μ„λ²„μ— λ¶„μ‚°ν•΄μ£Όλ” λ‹¨μν• λ°©μ‹μ΄κΈ° λ•λ¬Έμ— κ°€μ¥ λ§μ΄ μ‚¬μ©λλ‹¤. λ¨λ“  μ„λ²„μ μ„±λ¥μ΄ λ™μΌν•κ±°λ‚ λΉ„μ·ν• κ²½μ°μ— μ‚¬μ©ν•λ‹¤.
2. κ°€μ¤‘ λΌμ΄λ“ λ΅λΉ (Weighted round robin)
    - κ° μ„λ²„μ— μ²λ¦¬λ‰(κ°€μ¤‘μΉ)λ¥Ό μ§€μ •ν•κ³ , κ°€μ¤‘μΉκ°€ λ†’μ€ μ„λ²„μ— ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μ°μ„  μ „λ‹¬ν•λ” λ°©μ‹μ΄λ‹¤.
    - νΉμ • μ„λ²„μ μ‚¬μ–‘μ μΆ‹μ„ λ• μ‚¬μ©ν•λ” λ°©μ‹μ΄λ‹¤.
    - μλ¥Ό λ“¤μ–΄, 1λ² μ„λ²„(κ°€μ¤‘μΉ 3), 2λ² μ„λ²„(κ°€μ¤‘μΉ 1)μ΄κ³ , ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μ΄ 8κ°μ μ”μ²­μ„ λ°›μ•λ‹¤λ©΄, 1λ² μ„λ²„μ—λ” 6κ°μ μ”μ²­μ΄, 2λ² μ„λ²„μ—λ” 2κ°μ μ”μ²­μ΄ μ „λ‹¬λλ‹¤.
3. IP ν•΄μ‹ (IP Hash)
    - ν΄λΌμ΄μ–ΈνΈμ IP μ£Όμ†λ¥Ό ν•΄μ‹±ν•μ—¬ λ™μΌν• IP μ— λ€ν•΄μ„λ” ν•­μƒ λ™μΌν• μ„λ²„λ΅ μ—°κ²°λλ” κ²ƒμ„ λ³΄μ¥ν•λ” λ°©μ‹μ΄λ‹¤.
    - μ„Έμ…μ„ μ μ§€ν•΄μ•Ό ν•λ” μ‚¬μ΄νΈμ—μ„ μ£Όλ΅ μ‚¬μ©ν•λ” λ°©μ‹μ΄λ‹¤.
4. μµμ† μ—°κ²° (Least connection)
    - μ”μ²­μ΄ λ“¤μ–΄μ¨ μ‹μ μ— κ°€μ¥ μ κ² μ—°κ²°λμ–΄ μλ” μ„λ²„μ— μ”μ²­μ„ μ „μ†΅ν•λ” λ°©μ‹μ΄λ‹¤.
5. μµμ† μ‘λ‹µ μ‹κ°„ (Least response time)
    - μ„λ²„μ μ—°κ²° μƒνƒμ™€ μ‘λ‹µ μ‹κ°„μ„ λ¨λ‘ κ³ λ ¤ν•΄μ„ κ°€μ¥ μ μ€ μ—°κ²° μμ™€ κ°€μ¥ μ§§μ€ μ‘λ‹µ μ‹κ°„μ„ κ°€μ§€λ” μ„λ²„μ— μ°μ„  μ”μ²­μ„ λ³΄λ‚΄λ” λ°©μ‹μ΄λ‹¤.

λν• λ΅λ“ λ°Έλ°μ„μ μΆ…λ¥μ—λ” μ—¬λ¬ μΆ…λ¥κ°€ μ΅΄μ¬ν•λ‹¤. OSI 7κ³„μΈµμ„ κΈ°μ¤€μΌλ΅ L2, L3, L4, L7μ΄ μ΅΄μ¬ν•λ‹¤.

κ°„λ‹¨ν•κ² L2 λ” Mac μ£Όμ†λ¥Ό λ°”νƒ•μΌλ΅, L3 λ” IP μ£Όμ†λ¥Ό λ°”νƒ•μΌλ΅ μ‘λ™ν•λ‹¤.

μ—¬κΈ°μ„λ” L4 μ™€ L7 μ„ μ„μ£Όλ΅ λ‹¤λ£¨μ–΄λ³΄κ³ μ ν•λ‹¤.

1. L4
    - Transport layer (IP & Port) κ³„μΈµμ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ“¤μ–΄μ¨ μ”μ²­μ„ μ—¬λ¬ λ€μ μ„λ²„λ΅ λ‚λ„μ–΄μ£Όλ” κ²ƒμ„ μλ―Έν•λ‹¤.
    - μ„λ²„μ IP μ£Όμ†μ™€ ν¬νΈ λ²νΈλ¥Ό κΈ°μ¤€μΌλ΅ μ‘λ™ν•κΈ° λ•λ¬Έμ— ν•λ‚μ λ¬Όλ¦¬ μ„λ²„ μ»΄ν“¨ν„°μ—μ„ κ°κΈ° λ‹¤λ¥Έ ν¬νΈ λ²νΈλ¥Ό λ¶€μ—¬ν• μ—¬λ¬ μ„λ²„ ν”„λ΅κ·Έλ¨μ„ μ΄μν•λ‹¤λ©΄ μµμ† L4 λ΅λ“ λ°Έλ°μ„ μ΄μƒμ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
2. L7
    - IP μ™€ ν¬νΈ λ²νΈ μ΄μ™Έμ—λ„ URI, Payload, Http header, Cookie μ λ‚΄μ©μ„ κΈ°μ¤€μΌλ΅ νΈλν”½μ„ λ¶„μ‚°ν•λ‹¤.
    - μλ¥Ό λ“¤μ–΄, `https://naver.com` μ— μ ‘μ†ν•λ‹¤λ©΄, `/blog` μ— λ€ν• μ”μ²­μ„ `/blog` λ¥Ό λ‹΄λ‹Ήν•λ” μ„λ²„λ΅, `/news` μ— λ€ν• μ”μ²­μ„ `/news` λ¥Ό λ‹΄λ‹Ήν•λ” μ„λ²„λ΅ λ³΄λ‚΄λ” κ²ƒμ΄λ‹¤.
    - L4 λ΅λ“ λ°Έλ°μ„μ™€ λ‹¬λ¦¬, ν¨ν‚·μ„ λ¶„μ„ν•΄μ„ μ²λ¦¬κ°€ κ°€λ¥ν•κΈ° λ•λ¬Έμ— μ•…μμ μ΄κ±°λ‚ λΉ„μ •μƒμ μΈ μ½ν…μΈ λ¥Ό κ°μ§€ν•΄μ„ λ³΄μ• μ§€μ μ„ κµ¬μ¶•ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤. ν•μ§€λ§, κ·Έλ§νΌ μμ› μ†λ¨κ°€ ν¬λ‹¤λ” λ‹¨μ λ„ μ΅΄μ¬ν•λ‹¤.


μ •λ¦¬ν•λ©΄, λ¦¬λ²„μ¤ ν”„λ΅μ‹λ¥Ό μ‚¬μ©ν•λ©΄ λ΅λ“ λ°Έλ°μ‹±μ„ ν†µν•΄ μ—¬λ¬ WAS(μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… μ„λ²„)λ¥Ό λ‘μ–΄ μ‚¬μ©μμ μ”μ²­μ„ λ¶„μ‚°ν•  μ μλ‹¤. μ΄λ΅ μΈν•΄ νΈλν”½μ΄ κ³Όλ„ν•κ² λ°λ¦¬λ” κ²ƒμ„ λ°©μ§€ν•  μ μλ‹¤.

### λ³΄μ•

ν΄λΌμ΄μ–ΈνΈλ” μ‹¤μ  μ„λ²„μ IPλ¥Ό λ¨λ¥΄κ² ν•¨μΌλ΅μ¨ μ„λ²„λ¥Ό κ°μ¶ μ μλ‹¤.

κΈ°μ—…μ λ„¤νΈμ›ν¬ ν™κ²½μ—λ” DMZ(DeMilitarized Zone)κ°€ μ΅΄μ¬ν•λ‹¤.

DMZλ” μ™Έλ¶€ λ„¤νΈμ›ν¬μ™€ λ‚΄λ¶€ λ„¤νΈμ›ν¬ μ‚¬μ΄μ—μ„ μ™Έλ¶€ λ„¤νΈμ›ν¬ μ„λΉ„μ¤λ¥Ό μ κ³µν•λ” λ™μ‹μ— λ‚΄λ¶€ λ„¤νΈμ›ν¬λ¥Ό λ³΄νΈν•λ” μ„λΈλ„·μ„ μλ―Έν•λ‹¤. μ¦‰, μ™Έλ¶€μ— μ¤ν”λ μ„λ²„ μμ—­μ΄λ‹¤.

![6.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/6.png)

μ¶μ²: [[λ„¤νΈμ›ν¬] DMZ(DeMilitarized Zone)](https://ee-22-joo.tistory.com/40) [ν‹°μ¤ν† λ¦¬]

DMZ μ μ•λ’¤λ΅ λ°©ν™”λ²½μ΄ μ„¤μΉλλ‹¤. ν•λ‚λ” λ‚΄λ¶€ λ„¤νΈμ›ν¬μ™€ μ—°κ²°λλ©°, λ‹¤λ¥Έ ν•λ‚λ” μ™Έλ¶€ λ„¤νΈμ›ν¬μ™€ μ—°κ²°λλ‹¤.

λ‚΄λ¶€ λ° μ™Έλ¶€ λ„¤νΈμ›ν¬ λ¨λ‘ DMZ μ— μ ‘μ†ν•  μ μμ§€λ§, DMZ λ‚΄μ μ»΄ν“¨ν„°λ” μ¤μ§ μ™Έλ¶€ λ„¤νΈμ›ν¬μ—λ§ μ—°κ²°ν•  μ μλ‹¤.

λ³΄μ• λ©μ μΌλ΅ λ‚΄λ¶€ λ„¤νΈμ›ν¬λ¥Ό μ‚¬μ©ν•λ” λ‹¨μ²΄κ°€ μ΅΄μ¬ν•λ”λ°, μ΄ κ²½μ°μ—λ” μ™Έλ¶€ λ„¤νΈμ›ν¬μ™€ λ‹¨μ λμ–΄ λ©”μΌ μ„λ²„, μ›Ή μ„λ²„, DNS μ„λ²„μ™€ κ°™μ€ κΈ°λ³Έμ μΈ μΈν„°λ„· μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤.

κ·Έλ ‡κΈ° λ•λ¬Έμ— DMZ λ” μ™Έλ¶€μ—μ„ μ ‘κ·Όλμ–΄μ•Ό ν•  ν•„μ”κ°€ μλ” μ„λ²„λ“¤μ„ μ„ν•΄ μ‚¬μ©ν•λ‹¤.

μ™Έλ¶€μ™€ ν†µμ‹ ν•΄μ•Ό ν•λ” μ„λ²„λ¥Ό μ„ν•΄ λ‚΄λ¶€ λ„¤νΈμ›ν¬μ ν¬νΈλ¥Ό μ—΄μ–΄ μ‚¬μ©ν•λ‹¤λ©΄ λ‚΄λ¶€ λ„¤νΈμ›ν¬κ°€ λ…Έμ¶λμ–΄ ν•΄ν‚Ήλ  μ„ν—μ΄ μ΅΄μ¬ν•λ‹¤.

μ™Έλ¶€ λ„¤νΈμ›ν¬μ—μ„ DMZ λ΅ κ°€λ” μ—°κ²°μ€ ν¬νΈ μ£Όμ† λ³€ν™(PAT; Port Address Translation)μ„ ν†µν•΄ μ΄λ£¨μ–΄μ§„λ‹¤. PATλ” NAT(Network Address Translation)κ³Ό λΉ„μ·ν•μ§€λ§, ν¬νΈ λ²νΈκΉμ§€ ν•¨κ» λ³€ν™ν•΄μ¤€λ‹¤.

![7.png](/assets/images/2023/2023-04-11-forward-proxy-and-reverse-proxy/7.png)

μ¶μ²: [NAT / PAT λ™μ‘λ°©μ‹](https://zigispace.net/1107) [ν‹°μ¤ν† λ¦¬]

PAT λ” NAT μ™€ λ™μΌν•κ² IP μ£Όμ† λ³€ν™μ„ ν•΄μ£Όμ§€λ§, ν¬νΈ λ²νΈκΉμ§€ ν•¨κ» λ³€κ²½ν•μ—¬ NAT ν…μ΄λΈ”μ„ κ΄€λ¦¬ν•λ‹¤.

λ•λ¶„μ— ν•λ‚μ IP λ§μΌλ΅λ„ λ‹¤μ–‘ν• ν¬νΈ λ²νΈλ¥Ό μ‚¬μ©ν•΄μ„ μ‚¬μ©μλ¥Ό κµ¬λ¶„ν•  μ μλ‹¤λ” μ¥μ μ΄ μλ‹¤. λ‹¤λ§, ν¬νΈκ°€ λ™μ‹μ— μ‚¬μ© μ¤‘μ΄κ±°λ‚ μ¬μ‚¬μ©ν•  μ μ—†μ„ λ•λ” PAT κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•μ§€ μ•λ”λ‹¤.

### μΊμ‹± (Caching)

ν¬μ›λ“ ν”„λ΅μ‹μ™€ λ§μ°¬κ°€μ§€λ΅ ν”„λ΅μ‹ μ„λ²„μ— μΊμ‹±λμ–΄ μλ” λ°μ΄ν„°λ¥Ό μ κ³µν•¨μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈμ—κ² λΉ λ¥΄κ² μ„λΉ„μ¤λ¥Ό μ κ³µν•  μ μλ‹¤.

λ§μ•½, λ―Έκµ­μ— μ›Ή μ„λ²„κ°€ μκ³ , ν•κµ­μ— λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό λ‘μ—λ‹¤κ³  ν•΄λ³΄μ. μ–΄λ–¤ ν•κµ­ μ μ €κ°€ ν•κµ­μ— μλ” λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„μ™€ ν†µμ‹ ν•΄μ„ μΊμ‹±λμ–΄ μλ” λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•  κ²½μ° λ”μ± λΉ λ¥΄κ² μ„λΉ„μ¤λ¥Ό μ΄μ©ν•  μ μλ‹¤.

# μ°Έκ³ μλ£

- [ν¬μ›λ“ ν”„λ΅μ‹(forward proxy) λ¦¬λ²„μ¤ ν”„λ΅μ‹(reverse proxy) μ μ°¨μ΄](https://www.lesstif.com/system-admin/forward-proxy-reverse-proxy-21430345.html) [lesstif]
- [π Reverse Proxy / Forward Proxy μ •μ & μ°¨μ΄ μ •λ¦¬](https://inpa.tistory.com/entry/NETWORK-%F0%9F%93%A1-Reverse-Proxy-Forward-Proxy-%EC%A0%95%EC%9D%98-%EC%B0%A8%EC%9D%B4-%EC%A0%95%EB%A6%AC) [ν‹°μ¤ν† λ¦¬]
- [Proxyμ μ„Έκ°€μ§€ μΆ…λ¥](https://spr2ad.tistory.com/243) [ν‹°μ¤ν† λ¦¬]
- [[ν•΄μΉμ§€ μ•λ” μ›Ή] 3. ν”„λ΅μ‹ μ„λ²„](https://brunch.co.kr/@swimjiy/7) [λΈλ°μΉ]
- [[network] ν”„λ΅μ‹(proxy)λ€, forward proxyμ™€ reverse proxy](https://sujinhope.github.io/2021/06/13/Network-%ED%94%84%EB%A1%9D%EC%8B%9C(Proxy)%EB%9E%80,-Forward-Proxy%EC%99%80-Reverse-Proxy.html) [gitub.io]
- [[λ„¤νΈμ›ν¬] DMZ(DeMilitarized Zone)](https://ee-22-joo.tistory.com/40) [ν‹°μ¤ν† λ¦¬]
- [NAT / PAT λ™μ‘λ°©μ‹](https://zigispace.net/1107) [ν‹°μ¤ν† λ¦¬]
- [Scale-up, Scale-out μ΄λ€ λ¬΄μ—‡μΈκ°€](https://chunsubyeong.tistory.com/63) [ν‹°μ¤ν† λ¦¬]
- [[10λ¶„ ν…μ½”ν†΅] πΏ μ μ΄λ―Έμ Forward Proxy, Reverse Proxy, Load Balancer](https://youtu.be/YxwYhenZ3BE) [μ νλΈ]