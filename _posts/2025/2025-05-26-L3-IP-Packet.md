---
title: "L3 IP Packet"
date: 2025-05-26 18:05:00 +0900
categories: [network]
tags: []
use_math: true
---

# L3 IP Packet

패킷(Packet)은 3계층에서 사용하는 단위 데이터를 의미한다. 패킷은 Header와 Payload로 구성되어 있다. 패킷의 크기는 Header와 Payload를 합친 것인데, 패킷의 최대 크기는 MTU(Maximum Transmission Unit)라고 한다. 이더넷(ethernet) 기준으로는 1500바이트(1.4kb)이다. 아래의 그림에서는 Network Layer에 해당한다.

![1.png](/assets/images/2025/2025-05-26-L3-IP-Packet/1.png)

출처: [https://velog.io/@rockwellvinca/Network-패킷의-구조와-생성과정](https://velog.io/@rockwellvinca/Network-%ED%8C%A8%ED%82%B7%EC%9D%98-%EA%B5%AC%EC%A1%B0%EC%99%80-%EC%83%9D%EC%84%B1%EA%B3%BC%EC%A0%95)

## Encapsulation, Decapsulation

다른 프로세스에 데이터를 보내기 위해 7계층부터 하위 계층으로 내려가면서 Header와 Payload 구조로 데이터를 감싸는데, 이를 Encapsulation이라고 한다. 반대로 하위 계층에서 상위 계층으로 올라가면서 Header를 제거하며 Payload의 내용을 확인하는 과정을 Decapsulation이라 한다.

![2.png](/assets/images/2025/2025-05-26-L3-IP-Packet/2.png)

출처: https://slideplayer.com/slide/14026373/

L2 Frame의 Payload에는 L3 IP 패킷이 있는 것이다. 그리고 L3 IP 패킷은 다시 Header와 Payload 구조로 이루어져 있는데, 이는 마치 러시아의 전통 인형인 마트료시카와 비슷하다고 생각하면 된다.

## 패킷의 생성, 전달, 소멸

패킷은 택배를 보내고 받는 과정와 유사하다.

1. 택배를 보내는 사람은 물건을 박스에 담는다.
2. 박스 겉에 목적지, 출발지, 받는 사람이 적힌 송장을 부착한다.
3. 택배 기사님께서 박스를 가져가서 택배 차량에 싣는다.
4. 여러 물류 센터를 거친다.
5. 택배 기사님께서 송장을 통해 목적지에 택배를 전달한다.
6. 목적지에서는 받는 사람이 박스를 열어서 물건을 받는다.

어느 프로세스에서 다른 프로세스(호스트)로 데이터를 보내기 위해서는 패킷으로 만들어야 한다. 그리고 패킷을 전달해줄 곳을 알아야 하는데, 이를 게이트웨이(Gateway)라고 한다. 게이트웨이는 택배 기사님 역할을 한다.

다음으로 라우터를 통해 다른 프로세스가 속한 라우터로 이동을 하는데, 이 과정을 라우팅(Routing)이라 한다. 이는 여러 물류 센터를 거치는 과정과 동일하다.

라우팅을 거쳐 IPv4 주소에 해당하는 목적지에 도달한다. 컴퓨터는 수 많은 프로세스가 작동하고 있는데, 특정 프로세스에게 전달하기 위해 사용되는 것이 포트(Port) 번호이다. 택배의 받는 사람에 해당하는 것이 포트 번호이다.

예를 들어, `192.168.0.10:8080` 이라는 IPv4 주소와 포트 번호가 주어졌을 때, `192.168.0.10` 은 어떤 네트워크 안에서 특정 컴퓨터를 식별하기 위한 주소이고, 포트 번호에 해당하는 `8080`은 컴퓨터 안에서 작동하고 있는 프로세스를 식별하기 위한 것이다.

# 참고자료

- [[🌐Network] 패킷의 구조와 생성과정](https://velog.io/@rockwellvinca/Network-패킷의-구조와-생성과정) [velog]