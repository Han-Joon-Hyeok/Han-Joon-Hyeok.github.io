<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.0" /><meta property="og:title" content="C언어 서로 다른 구조체 포인터 캐스팅의 원리" /><meta name="author" content="Joon Hyeok Han" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="개요" /><meta property="og:description" content="개요" /><link rel="canonical" href="https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/" /><meta property="og:url" content="https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/" /><meta property="og:site_name" content="Dev Joon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-08-06T16:30:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="C언어 서로 다른 구조체 포인터 캐스팅의 원리" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Joon Hyeok Han" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joon Hyeok Han"},"dateModified":"2025-08-18T08:44:20+09:00","datePublished":"2025-08-06T16:30:00+09:00","description":"개요","headline":"C언어 서로 다른 구조체 포인터 캐스팅의 원리","mainEntityOfPage":{"@type":"WebPage","@id":"https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/"},"url":"https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/"}</script><title>C언어 서로 다른 구조체 포인터 캐스팅의 원리 | Dev Joon</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-SKST7KNWSJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SKST7KNWSJ'); }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dev Joon</a></div><div class="site-subtitle font-italic">성장하는 개발자, 한준혁입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Han-Joon-Hyeok" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['joonhyeok.han','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>C언어 서로 다른 구조체 포인터 캐스팅의 원리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>C언어 서로 다른 구조체 포인터 캐스팅의 원리</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 6, 2025, 4:30 PM +0900" > Aug 6 <i class="unloaded">2025-08-06T16:30:00+09:00</i> </span> by <span class="author"> Joon Hyeok Han </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Mon, Aug 18, 2025, 8:44 AM +0900" > Aug 18 <i class="unloaded">2025-08-18T08:44:20+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1459 words">8 min</span></div></div><div class="post-content"><h1 id="개요">개요</h1><p>C언어에서 서로 다른 구조체 포인터를 캐스팅할 때의 작동 원리를 정리한다.</p><p>이를 통해 C에서도 구조체 레이아웃을 이용해 객체 지향 언어의 ‘업캐스팅’과 유사한 동작을 구현할 수 있음을 확인할 수 있다.</p><h1 id="분석-대상-코드">분석 대상 코드</h1><h2 id="구조체-정의">구조체 정의</h2><p>서로 다른 멤버를 가진 구조체가 있다고 하자.</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">parent_s</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">parent_s</span> <span class="o">*</span><span class="n">prev</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">parent_s</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span> <span class="n">parent_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">child_s</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">child_s</span> <span class="o">*</span><span class="n">prev</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">child_s</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span> <span class="c1">// parent_t 구조체에는 존재하지 않음</span>
<span class="p">}</span> <span class="n">child_t</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="캐스팅-시도-코드">캐스팅 시도 코드</h2><p>아래 코드는 <code class="language-plaintext highlighter-rouge">child_t*</code>를 <code class="language-plaintext highlighter-rouge">parent_t*</code>로 캐스팅한 뒤 포인터 멤버 값을 출력한다.</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">child_t</span> <span class="n">child</span><span class="p">;</span>

    <span class="c1">// child_t 초기화</span>
    <span class="n">child</span><span class="p">.</span><span class="n">prev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">child_t</span><span class="p">));</span>
    <span class="n">child</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">child</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

    <span class="n">printf</span><span class="p">(</span><span class="s">"=== 원본 child ===</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child.prev = %p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">child</span><span class="p">.</span><span class="n">prev</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child.next = %p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child.data = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">child</span><span class="p">.</span><span class="n">data</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child.next-&gt;data = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>

    <span class="c1">// child_t를 parent_t 포인터로 캐스팅</span>
    <span class="n">parent_t</span> <span class="o">*</span><span class="n">parent_ptr</span> <span class="o">=</span> <span class="p">(</span><span class="n">parent_t</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">child</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">=== 1단계: child_t -&gt; parent_t 캐스팅 ===</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"parent_ptr-&gt;prev = %p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">parent_ptr</span><span class="o">-&gt;</span><span class="n">prev</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"parent_ptr-&gt;next = %p</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">parent_ptr</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="실행-결과">실행 결과</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>=== 원본 child_t ===
child.prev = (nil)
child.next = 0x57722c1732a0
child.data = 10
child.next-&gt;data = 20

=== child_t-&gt; parent_t 캐스팅 ===
parent_ptr-&gt;prev = (nil)
parent_ptr-&gt;next = 0x57722c1732a0
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">child.next</code> 와 <code class="language-plaintext highlighter-rouge">parent_ptr→next</code> 의 주소값이 동일함을 통해, 서로 다른 구조체 포인터 간 캐스팅이 동작했음을 확인할 수 있다.</p><h1 id="작동-원리-분석">작동 원리 분석</h1><p>이 동작이 가능한 이유는 <strong>두 구조체의 앞부분 메모리 레이아웃이 동일</strong>하기 때문이다.</p><p>64비트 시스템 기준으로 포인터는 8바이트 크기를 갖는다.</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">typedef</span> <span class="k">struct</span> <span class="n">parent_s</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">parent_s</span> <span class="o">*</span><span class="n">prev</span><span class="p">;</span> <span class="c1">// 8바이트</span>
    <span class="k">struct</span> <span class="n">parent_s</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 8바이트</span>
<span class="p">}</span> <span class="n">parent_t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="n">child_s</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">child_s</span> <span class="o">*</span><span class="n">prev</span><span class="p">;</span> <span class="c1">// 8바이트</span>
    <span class="k">struct</span> <span class="n">child_s</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span> <span class="c1">// 8바이트</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span> <span class="c1">// 4바이트</span>
<span class="p">}</span> <span class="n">child_t</span><span class="p">;</span>
</pre></table></code></div></div><p>메모리 배치의 앞부분 16바이트가 <code class="language-plaintext highlighter-rouge">child_t</code> 와 <code class="language-plaintext highlighter-rouge">parent_t</code> 가 서로 동일하다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>[child_t 메모리]
 ┌───────────┬───────────┬───────
 │ prev(ptr) │ next(ptr) │ data  │
 │   8Byte   │   8Byte   │ 4Byte │
 └───────────┴───────────┴───────

[parent_t 메모리]
 ┌───────────┬───────────
 │ prev(ptr) │ next(ptr) │
 │   8Byte   │   8Byte   │
 └───────────┴───────────
</pre></table></code></div></div><ul><li>앞 16바이트(<code class="language-plaintext highlighter-rouge">prev</code>와 <code class="language-plaintext highlighter-rouge">next</code>)가 동일하므로 캐스팅 후에도 포인터 접근이 정상 동작<li>원본 메모리는 그대로 유지되므로 주소값이 일치함</ul><h1 id="c의-업캐스팅과-비교">C++의 업캐스팅과 비교</h1><p>C언어의 구조체 상속 기법은 C++의 업캐스팅과 유사하다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="c1">// 부모 클래스</span>
<span class="k">class</span> <span class="nc">Parent</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Parent</span><span class="o">*</span> <span class="n">prev</span><span class="p">;</span>
    <span class="n">Parent</span><span class="o">*</span> <span class="n">next</span><span class="p">;</span>

    <span class="n">Parent</span><span class="p">()</span> <span class="o">:</span> <span class="n">prev</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">),</span> <span class="n">next</span><span class="p">(</span><span class="nb">nullptr</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">link</span><span class="p">(</span><span class="n">Parent</span><span class="o">*</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 자식 클래스</span>
<span class="k">class</span> <span class="nc">Child</span> <span class="o">:</span> <span class="k">public</span> <span class="n">Parent</span> <span class="p">{</span>  <span class="c1">// 상속</span>
<span class="nl">public:</span>
    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>

    <span class="n">Child</span><span class="p">(</span><span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="n">Parent</span><span class="p">(),</span> <span class="n">data</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">printData</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child data: "</span> <span class="o">&lt;&lt;</span> <span class="n">data</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Child</span> <span class="n">c1</span><span class="p">(</span><span class="mi">42</span><span class="p">);</span>          <span class="c1">// data = 42</span>
    <span class="n">Child</span><span class="o">*</span> <span class="n">childPtr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">c1</span><span class="p">;</span> <span class="c1">// 원래 포인터</span>
    <span class="n">Parent</span><span class="o">*</span> <span class="n">parentPtr</span> <span class="o">=</span> <span class="n">childPtr</span><span class="p">;</span> <span class="c1">// 업캐스팅</span>

    <span class="c1">// 포인터 주소 출력</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child pointer (Child*):  "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">childPtr</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Parent pointer (Parent*): "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">parentPtr</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="c1">// 데이터 접근 비교</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child data via Child*:  "</span> <span class="o">&lt;&lt;</span> <span class="n">childPtr</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Child data via Parent*: "</span>
         <span class="o">&lt;&lt;</span> <span class="p">((</span><span class="n">Child</span><span class="o">*</span><span class="p">)</span><span class="n">parentPtr</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 다운캐스팅 후 접근</span>

    <span class="c1">// 포인터 멤버 prev/next 비교</span>
    <span class="n">parentPtr</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="n">parentPtr</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"prev pointer via Child*:  "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">childPtr</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"prev pointer via Parent*: "</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="n">parentPtr</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><p>출력 시 <code class="language-plaintext highlighter-rouge">Child*</code>와 <code class="language-plaintext highlighter-rouge">Parent*</code> 주소가 동일하게 나타난다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>Child pointer (Child*):  0x7ffee8d3a8b0
Parent pointer (Parent*): 0x7ffee8d3a8b0
Child data via Child*:  42
Child data via Parent*: 42
prev pointer via Child*:  0x0
prev pointer via Parent*: 0x0
</pre></table></code></div></div><p>두 언어에서 상속을 하는 방법과 특징을 정리하면 아래와 같다.</p><div class="table-wrapper"><table><thead><tr><th>언어<th>방법<th>특징<tbody><tr><td>C<td>구조체 포인터 캐스팅<td>메모리 레이아웃 동일 시 안전<tr><td>C++<td>상속 + 업캐스팅<td>타입 호환을 컴파일러가 보장</table></div><h1 id="다운캐스팅">다운캐스팅</h1><p>마찬가지로 C 구조체를 이용해 다운캐스팅도 가능하다. 업캐스팅한 포인터를 다시 원래 구조체 타입으로 변환하면, 동일한 메모리 영역을 참조하므로 원래 값이 그대로 유지된다.</p><div class="language-cpp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">child_t</span> <span class="n">child</span><span class="p">;</span>

    <span class="c1">// child_t 초기화</span>
    <span class="n">child</span><span class="p">.</span><span class="n">prev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">child_t</span><span class="p">));</span>
    <span class="n">child</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>

    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">prev</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">child</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="n">child</span><span class="p">.</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>

    <span class="c1">// child_t를 parent_t 포인터로 캐스팅</span>
    <span class="n">parent_t</span> <span class="o">*</span><span class="n">parent_ptr</span> <span class="o">=</span> <span class="p">(</span><span class="n">parent_t</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">child</span><span class="p">;</span>

    <span class="c1">// parent_t 포인터를 다시 child_t 포인터로 캐스팅</span>
    <span class="n">child_t</span> <span class="o">*</span><span class="n">child_ptr</span> <span class="o">=</span> <span class="p">(</span><span class="n">child_t</span> <span class="o">*</span><span class="p">)</span><span class="n">parent_ptr</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">=== parent_t -&gt; child_t 다운캐스팅 ===</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child_ptr-&gt;data = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">child_ptr</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"child_ptr-&gt;next-&gt;data = %d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">child_ptr</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</pre></table></code></div></div><p>출력 결과는 다음과 같다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>=== parent_t -&gt; child_t 다운캐스팅 ===
child_ptr-&gt;data = 10
child_ptr-&gt;next-&gt;data = 20
</pre></table></code></div></div><p>업캐스팅 후 다운캐스팅을 수행해도 메모리 주소가 변하지 않기 때문에<code class="language-plaintext highlighter-rouge">data</code>와 <code class="language-plaintext highlighter-rouge">next-&gt;data</code>는 원래 값 그대로 유지된다. 단, 원래부터 <code class="language-plaintext highlighter-rouge">parent_t</code> 타입으로 선언된 객체를 <code class="language-plaintext highlighter-rouge">child_t</code>로 다운캐스팅하면 정의되지 않은 동작(Undefined Behavior, UB)이 발생할 수 있으므로 주의해야 한다.</p><h1 id="주의-사항">주의 사항</h1><ul><li>구조체 레이아웃이 변경되면 캐스팅 동작이 보장되지 않는다.<li>구조체 상속 기법은 유지보수 시 신중하게 사용해야 한다.</ul><h1 id="참고자료">참고자료</h1><ul><li><a href="https://jtrimind.github.io/oop/oop-in-c-02/">C언어에서 OOP 하기(2) - 상속</a> [github.io]</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/c/'>c</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=C언어 서로 다른 구조체 포인터 캐스팅의 원리 - Dev Joon&url=https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=C언어 서로 다른 구조체 포인터 캐스팅의 원리 - Dev Joon&u=https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=C언어 서로 다른 구조체 포인터 캐스팅의 원리 - Dev Joon&url=https://han-joon-hyeok.github.io/posts/c-language-struct-pointer-data-type-casting/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/c-bitwise-operation-between-different-integer-sizes/">[C언어] 자료형 크기 차이로 인한 비트 연산 오류 해결 방법</a><li><a href="/posts/connect-to-ec2-without-ssh-key-using-session-manager/">[AWS] EC2 인스턴스 ssh 키 없이 터미널 접속하는 방법 (AWS Session Manager)</a><li><a href="/posts/how-to-access-geo-restricted-websites-using-mullvad-vpn/">국가 제한이 걸린 사이트에 접속하는 방법 (feat. Mullvad VPN)</a><li><a href="/posts/network-overview/">네트워크 LAN, WAN / 스위치, 라우터 / IP 주소 / 서브넷 개념 정리</a><li><a href="/posts/what-is-nat/">NAT란?</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/static-variable-in-c/"><div class="card-body"> <span class="timeago small" > Jun 14, 2022 <i class="unloaded">2022-06-14T16:09:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>정적 변수(static variable)란?</h3><div class="text-muted small"><p> 정적 변수(static variable) 정적 변수는 프로그램이 실행되는 동안 계속 유지되는 변수이다. 지역 변수는 함수가 실행되는 동안 해당 스코프 안에서만 생성되고, 함수가 끝나면 파괴되는데, 이와 달리 정적 변수는 함수가 끝나도 값이 그대로 유지된다. 정적 변수를 선언하는 방법은 다음과 같다. static 자료형 변수명; 정적 변수의 ...</p></div></div></a></div><div class="card"> <a href="/posts/printf-format-specifiers-with-width-and-precision/"><div class="card-body"> <span class="timeago small" > Aug 10, 2022 <i class="unloaded">2022-08-10T21:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[C언어] printf 서식 지정자와 정밀도, width 탐구</h3><div class="text-muted small"><p> 들어가며 C언어의 printf 함수는 다양한 서식 지정자와 함께 여러 옵션을 함께 사용해서 데이터를 원하는 대로 출력할 수 있다. 이 글은 서식 지정자에 대한 설명보다는 정밀도와 width를 서식 지정자와 활용했을 때 어떤 결과가 나오는 지 다양한 케이스를 바탕으로 정리하였다. 서식 지정자를 모두 살펴볼 수는 없기에 여기서는 %s(문자열), %d...</p></div></div></a></div><div class="card"> <a href="/posts/gcc-macro-redefined-error-fix/"><div class="card-body"> <span class="timeago small" > Oct 14 <i class="unloaded">2025-10-14T14:40:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[C언어] 매크로 재정의 오류 원인과 해결 방법 (GCC 전처리기 기준)</h3><div class="text-muted small"><p> 실행 환경 OS: Ubuntu 22.04 Architecture: x86_64 (64-bit) GCC: 11.4.0 요약 동일한 이름의 매크로를 서로 다른 방식으로 정의하면 GCC 전처리기가 두 매크로를 동일하지 않은 토큰으로 판단해 redefined 오류가 발생한다. 안전하게 프로그램을 설계하려면 #ifndef 전처리기 사용 또...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/what-is-arp/" class="btn btn-outline-primary" prompt="Older"><p>ARP 개념 정리</p></a> <a href="/posts/understanding-llcf-link-loss-carry-forward.md/" class="btn btn-outline-primary" prompt="Newer"><p>LLCF 개념 및 장애 전파 작동 원리</p></a></div><script src="https://utteranc.es/client.js" repo="Han-Joon-Hyeok/Han-Joon-Hyeok.github.io" issue-term="pathname" label="Comments" theme="preferred-color-scheme" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/han-joon-hyeok">Joon Hyeok Han</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://han-joon-hyeok.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
