<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.0" /><meta property="og:title" content="[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron" /><meta name="author" content="Joon Hyeok Han" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="monitoring.sh" /><meta property="og:description" content="monitoring.sh" /><link rel="canonical" href="https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/" /><meta property="og:url" content="https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/" /><meta property="og:site_name" content="Dev Joon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-04T22:50:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Joon Hyeok Han" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joon Hyeok Han"},"dateModified":"2023-11-02T00:06:02+09:00","datePublished":"2022-09-04T22:50:00+09:00","description":"monitoring.sh","headline":"[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron","mainEntityOfPage":{"@type":"WebPage","@id":"https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/"},"url":"https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/"}</script><title>[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron | Dev Joon</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-SKST7KNWSJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SKST7KNWSJ'); }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dev Joon</a></div><div class="site-subtitle font-italic">성장하는 개발자, 한준혁입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Han-Joon-Hyeok" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['joonhyeok.han','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 4, 2022, 10:50 PM +0900" > Sep 4, 2022 <i class="unloaded">2022-09-04T22:50:00+09:00</i> </span> by <span class="author"> Joon Hyeok Han </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Nov 2, 2023, 12:06 AM +0900" > Nov 2, 2023 <i class="unloaded">2023-11-02T00:06:02+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4776 words">26 min</span></div></div><div class="post-content"><h1 id="monitoringsh">monitoring.sh</h1><p>과제에서는 가상머신 실행 후 10분마다 터미널에 다음과 같은 정보를 출력할 것을 요구하고 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>1. 운영 체제의 아키텍처 및 커널 버전
2. 물리적 프로세서의 수
3. 가상 프로세서 수
4. 서버의 현재 사용 가능한 RAM과 활용률
5. 서버의 현재 가용 메모리와 활용률
6. 프로세서의 현재 활용률
7. 마지막으로 재부팅한 날짜 및 시간
8. LVM의 활성 여부
9. 활성 연결 수
10. 서버를 사용하는 사용자 수
11. 서버의 IPv4 주소와 MAC<span class="o">(</span>Media Access Control<span class="o">)</span> 주소
12. <span class="nb">sudo </span>프로그램으로 실행된 명령의 수
</pre></table></code></div></div><h2 id="스크립트-내용">스크립트 내용</h2><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="nb">printf</span> <span class="s2">"#Architecture: "</span>
<span class="nb">uname</span> <span class="nt">-a</span>

<span class="nb">printf</span> <span class="s2">"#CPU physical : "</span>
<span class="nb">nproc</span> <span class="nt">--all</span>

<span class="nb">printf</span> <span class="s2">"#vCPU : "</span>
<span class="nb">cat</span> /proc/cpuinfo | <span class="nb">grep </span>processor | <span class="nb">wc</span> <span class="nt">-l</span>

<span class="nb">printf</span> <span class="s2">"#Memory Usage: "</span>
free <span class="nt">-m</span> | <span class="nb">grep </span>Mem | <span class="nb">awk</span> <span class="s1">'{printf"%d/%dMB (%.2f%%)\n", $3, $2, $3/$2 * 100}'</span>

<span class="nb">printf</span> <span class="s2">"#Disk Usage: "</span>
<span class="nb">df</span> <span class="nt">-a</span> <span class="nt">-BM</span> | <span class="nb">grep</span> /dev/map | <span class="nb">awk</span> <span class="s1">'{sum+=$3}END{print sum}'</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">"/"</span>
<span class="nb">df</span> <span class="nt">-a</span> <span class="nt">-BM</span> | <span class="nb">grep</span> /dev/map | <span class="nb">awk</span> <span class="s1">'{sum+=$4}END{print sum}'</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">"MB ("</span>
<span class="nb">df</span> <span class="nt">-a</span> <span class="nt">-BM</span> | <span class="nb">grep</span> /dev/map | <span class="nb">awk</span> <span class="s1">'{sum1+=$3 ; sum2+=$4 }END{printf "%d", sum1 / sum2 * 100}'</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">"%%)</span><span class="se">\n</span><span class="s2">"</span>

<span class="nb">printf</span> <span class="s2">"#CPU load: "</span>
mpstat | <span class="nb">grep </span>all | <span class="nb">awk</span> <span class="s1">'{printf "%.2f%%\n", 100-$13}'</span>

<span class="nb">printf</span> <span class="s2">"#Last boot: "</span>
<span class="nb">who</span> <span class="nt">-b</span> | <span class="nb">awk</span> <span class="s1">'{printf $3" "$4"\n"}'</span>

<span class="nb">printf</span> <span class="s2">"#LVM use: "</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="si">$(</span>lsblk | <span class="nb">grep </span>lvm | <span class="nb">wc</span> <span class="nt">-l</span><span class="si">)</span><span class="s2">"</span> <span class="nt">-gt</span> 0 <span class="o">]</span> <span class="p">;</span> <span class="k">then </span><span class="nb">printf</span> <span class="s2">"yes</span><span class="se">\n</span><span class="s2">"</span> <span class="p">;</span> <span class="k">else </span><span class="nb">printf</span> <span class="s2">"no</span><span class="se">\n</span><span class="s2">"</span> <span class="p">;</span> <span class="k">fi

</span><span class="nb">printf</span> <span class="s2">"#Connections TCP : "</span>
ss | <span class="nb">grep</span> <span class="nt">-i</span> tcp | <span class="nb">wc</span> <span class="nt">-l</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">" ESTABLISHED</span><span class="se">\n</span><span class="s2">"</span>

<span class="nb">printf</span> <span class="s2">"#User log: "</span>
<span class="nb">who</span> | <span class="nb">wc</span> <span class="nt">-l</span>

<span class="nb">printf</span> <span class="s2">"#Network: IP "</span>
<span class="nb">hostname</span> <span class="nt">-I</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">"("</span>
ip <span class="nb">link</span> | <span class="nb">awk</span> <span class="s1">'$1 == "link/ether" {print $2}'</span> | <span class="nb">sed</span> <span class="s1">'2, $d'</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">")</span><span class="se">\n</span><span class="s2">"</span>

<span class="nb">printf</span> <span class="s2">"#Sudo : "</span>
journalctl <span class="nv">_COMM</span><span class="o">=</span><span class="nb">sudo</span> | <span class="nb">wc</span> <span class="nt">-l</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
<span class="nb">printf</span> <span class="s2">" cmd</span><span class="se">\n</span><span class="s2">"</span>
</pre></table></code></div></div><p>위의 내용을 편하게 복사해서 붙여넣으려면 로컬 컴퓨터에서 ssh 로 가상머신에 접속하면 된다.</p><h2 id="명령어-분석">명령어 분석</h2><h3 id="1-운영체제의-아키텍쳐와-커널-버전">1. 운영체제의 아키텍쳐와 커널 버전</h3><p><code class="language-plaintext highlighter-rouge">uname</code> 명령어는 시스템 정보를 출력하는 명령어이다.</p><p><code class="language-plaintext highlighter-rouge">-a</code> 옵션(all)을 사용하면 운영체제의 아키텍쳐와 커널 버전까지 모두 출력할 수 있다.</p><h3 id="2-프로세서-개수">2. 프로세서 개수</h3><p>CPU는 크게 3가지 주요 용어로 설명할 수 있다.</p><ul><li>Processor : 메인보드 소켓에 장착되는 물리적인 칩을 의미한다. CPU와 동일한 의미로 사용되고 있다. 하나의 프로세서에는 다수의 Core 가 존재할 수 있다.<li>Core : 각종 연산을 수행하는 핵심 요소이다. 하나의 코어에는 다수의 Hardware thread 가 존재할 수 있다. (일꾼)<li>Hardware thread : 하나의 코어 안에서 실질적으로 연산을 수행하는 논리적인 작업이다. (일꾼의 손)</ul><p>그림으로 살펴보면 다음과 같다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-09-04-born2beroot-monitoring-system-and-cron/processor.jpeg" alt="processor" /></p><p>출처: <a href="https://www.linkedin.com/pulse/understanding-physical-logical-cpus-akshay-deshpande/">링크드인</a></p><p>왼쪽의 그림은 물리적인 프로세서와 내부 구조를 표현한 것이고, 오른쪽의 그림은 실제 운영체제에서 인식하는 논리적인 프로세서(logical processor)의 개수를 의미한다.</p><p>위의 그림을 수치로 표현하면 1 Processor, 4 Physical core, 8 Logical core 가 있는 것이다.</p><p>과제에서 요구하는 물리적 프로세서(Physical processor)가 의미하는 바는 물리적인 CPU의 개수(프로세서)를 의미하는 것이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 설치된 모든 프로세서의 개수를 표시</span>
<span class="nb">nproc</span> <span class="nt">--all</span>
</pre></table></code></div></div><p>그 다음 가상 프로세서(virtual processor)는 가상 머신에 할당되는 프로세서를 의미한다. 가상 머신을 실행하면 로컬 컴퓨터의 RAM, 하드 디스크, 네트워크 일부를 가상 머신에 할당해서 사용하는 것인데, CPU도 일부 할당해서 주는 것이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># CPU 정보를 담고 있는 파일에서 프로세서의 개수 세기</span>
<span class="c"># wc -l 는 개행문자를 기준으로 몇 개의 줄이 있는지 센다.</span>
<span class="nb">cat</span> /proc/cpuinfo | <span class="nb">grep </span>processor | <span class="nb">wc</span> <span class="nt">-l</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">/proc/cpuinfo</code> 는 CPU 정보를 담고 있는 파일인데, 만약 2개의 프로세서가 존재한다면 다음과 같이 표시된다. (프로세서는 0번부터 시작)</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>joonhan@joonhan42:~<span class="nv">$ </span><span class="nb">cat</span> /proc/cpuinfo | <span class="nb">grep </span>processor
processor       : 0
processor       : 1
</pre></table></code></div></div><h3 id="3-사용가능한-ram-및-사용률">3. 사용가능한 RAM 및 사용률</h3><p>RAM이란 Random Access Memory 의 약자로 사용자가 자유롭게 내용을 읽고 쓰고 지울 수 있는 기억장치이다. 컴퓨터가 켜지는 순간부터 부팅에 필요한 프로그램을 RAM에 적재한다.</p><p>비유하자면, 마트에서 생선을 사와서 냉장고(하드 디스크)에 보관하고, 요리할 때는 싱크대(RAM)에서 하는 것과 같다. 그래서 하드 디스크를 보조 기억 장치, RAM을 주기억 장치라고 한다.</p><p>Random Access 라는 말은 어느 위치든 똑같은 속도로 접근하여 읽고 쓸 수 있다는 의미이며, 하드 디스크처럼 데이터의 물리적 위치에 따라 읽고 쓰는 시간의 차이가 발생하는 기억장치들은 Direct Access Memory 라 한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>free
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">free</code> 명령어는 리눅스 시스템에서 메모리의 전체적인 현황을 표시하는 명령어이다. 실행하면 다음과 같이 출력된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>							total        used        free      shared  buff/cache   available
Mem:          999900       79752      696536         588      223612      779948
Swap:         974844           0      974844
</pre></table></code></div></div><p>각 항목에 대한 설명은 다음과 같다.</p><ul><li><code class="language-plaintext highlighter-rouge">total</code> : 전체 메모리 용량<li><code class="language-plaintext highlighter-rouge">used</code> : 사용되고 있는 메모리 용량<li><code class="language-plaintext highlighter-rouge">free</code> : 사용되지 않는 메모리 용량<li><code class="language-plaintext highlighter-rouge">shared</code> : 임시 파일 스토리지인 tmpfs(Temporary File Storage) 이 사용하는 공간으로, 파일을 임시로 저장했다가 지울 수 있는 공간을 의미한다.<li><code class="language-plaintext highlighter-rouge">buff/cache</code> : 커널의 버퍼와 캐시(동적 할당)로 사용하는 공간</ul><p>여기서 <code class="language-plaintext highlighter-rouge">Swap</code> 메모리는 RAM에 공간이 없을 경우 예비로 사용하는 메모리 공간이다. 실제로는 하드 디스크의 공간 일부를 사용하기 때문에 가상 메모리 개념에 가깝다. 속도는 실제 RAM 이 아닌 하드디스크를 이용하기 때문에 현저히 떨어진다. <code class="language-plaintext highlighter-rouge">Swap</code> 메모리의 반대 개념으로는 램을 하드 디스크처럼 사용하는 램 디스크가 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># -m : MB 단위로 출력</span>
free <span class="nt">-m</span> | <span class="nb">grep </span>Mem | <span class="nb">awk</span> <span class="s1">'{printf"%d/%dMB (%.2f%%)\n", $3, $2, $3/$2 * 100}'</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">awk</code> 명령어는 데이터를 가공해서 출력하기 위한 명령어이다.</p><ul><li><code class="language-plaintext highlighter-rouge">{ action }</code> : action 으로 입력한 명령어를 실행한다.<li><code class="language-plaintext highlighter-rouge">$N</code> : 0은 전체 열, 1부터는 첫 번째 열에 대응한다. (공백문자를 기준으로 구분)<div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>free <span class="nt">-m</span> | <span class="nb">grep </span>Mem | <span class="nb">awk</span> <span class="s1">'{ print $0 }'</span>
Mem:             976          78         679           0         218         761
free <span class="nt">-m</span> | <span class="nb">grep </span>Mem | <span class="nb">awk</span> <span class="s1">'{ print $1 }'</span>
Mem:
free <span class="nt">-m</span> | <span class="nb">grep </span>Mem | <span class="nb">awk</span> <span class="s1">'{ print $2 }'</span>
976
</pre></table></code></div></div></ul><h3 id="4-가용-메모리">4. 가용 메모리</h3><p>가용 메모리는 사용 가능한 하드 디스크의 용량을 의미한다.</p><p><code class="language-plaintext highlighter-rouge">df</code> 명령어는 하드 디스크의 저장 공간 현황을 보여주는 명령어다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># -a  : 전체 디스크 보여줌</span>
<span class="c"># -BM : Block size 를 MB 단위로 표시함</span>
<span class="nb">df</span> <span class="nt">-a</span> <span class="nt">-BM</span>
</pre></table></code></div></div><p>실행 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre>Filesystem                    1M-blocks  Used Available Use% Mounted on
sysfs                                0M    0M        0M    - /sys
proc                                 0M    0M        0M    - /proc
udev                               471M    0M      471M   0% /dev
devpts                               0M    0M        0M    - /dev/pts
tmpfs                               98M    1M       98M   1% /run
/dev/mapper/LVMGroup-root         1837M 1163M      563M  68% /
securityfs                           0M    0M        0M    - /sys/kernel/security
tmpfs                              489M    0M      489M   0% /dev/shm
tmpfs                                5M    0M        5M   0% /run/lock
cgroup2                              0M    0M        0M    - /sys/fs/cgroup
pstore                               0M    0M        0M    - /sys/fs/pstore
none                                 0M    0M        0M    - /sys/fs/bpf
systemd-1                             -     -         -    - /proc/sys/fs/binfmt_misc
debugfs                              0M    0M        0M    - /sys/kernel/debug
mqueue                               0M    0M        0M    - /dev/mqueue
hugetlbfs                            0M    0M        0M    - /dev/hugepages
tracefs                              0M    0M        0M    - /sys/kernel/tracing
configfs                             0M    0M        0M    - /sys/kernel/config
fusectl                              0M    0M        0M    - /sys/fs/fuse/connections
/dev/sda1                          451M   86M      338M  21% /boot
/dev/mapper/LVMGroup-srv           919M    1M      856M   1% /srv
/dev/mapper/LVMGroup-home          919M    1M      856M   1% /home
/dev/mapper/LVMGroup-tmp           919M    1M      856M   1% /tmp
/dev/mapper/LVMGroup-var           919M  210M      646M  25% /var
/dev/mapper/LVMGroup-var--log      982M   75M      840M   9% /var/log
tmpfs                               98M    0M       98M   0% /run/user/1000
binfmt_misc                          0M    0M        0M    - /proc/sys/fs/binfmt_misc
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">awk</span> <span class="s1">'{ sum += $3 }END{ print sum }'</span>
</pre></table></code></div></div><p>3번째 열에 있는 모든 값을 <code class="language-plaintext highlighter-rouge">sum</code> 이라는 변수에 모두 더한 다음, <code class="language-plaintext highlighter-rouge">sum</code> 의 값을 출력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
</pre></table></code></div></div><p>개행 문자를 삭제한다.</p><h3 id="5-프로세서-사용률">5. 프로세서 사용률</h3><p>프로세서(CPU)의 사용 가능 용량과 Core 별 사용량을 출력하는 명령어는 <code class="language-plaintext highlighter-rouge">mpstat</code> 이다. 이 명령어를 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">sysstat</code> 설치가 필요하다.</p><p><code class="language-plaintext highlighter-rouge">sysstat</code> 은 리눅스에서 자원에 대한 모니터링을 도와주는 프로그램이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt <span class="nb">install </span>sysstat
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">mpstat</code> 실행 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>Linux 5.10.0-16-amd64 <span class="o">(</span>joonhan42<span class="o">)</span> 	07/19/2022 	_x86_64_	<span class="o">(</span>1 CPU<span class="o">)</span>

03:13:20 PM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
03:13:20 PM  all    0.03    0.00    0.06    0.02    0.00    0.19    0.00    0.00    0.00   99.69
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">%idle</code> 은 cpu 사용량의 남은 용량을 의미하므로 100 에서 해당 값을 빼면 현재 사용량을 구할 수 있다.</p><h3 id="6-마지막-부팅-시간과-날짜">6. 마지막 부팅 시간과 날짜</h3><p><code class="language-plaintext highlighter-rouge">last</code> 명령어는 사용자가 언제 마지막으로 로그인하고 부팅을 종료했는지 보여주는 명령어이다. 실행 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>joonhan  pts/0        10.0.2.2         Tue Jul 19 13:57   still logged <span class="k">in
</span>joonhan  pts/0        10.0.2.2         Mon Jul 18 14:16 - 11:05  <span class="o">(</span>20:48<span class="o">)</span>
joonhan  pts/0        10.0.2.2         Mon Jul 18 13:03 - 13:05  <span class="o">(</span>00:02<span class="o">)</span>
joonhan  pts/0        10.0.2.2         Mon Jul 18 12:59 - 13:03  <span class="o">(</span>00:03<span class="o">)</span>
joonhan  tty1                          Mon Jul 18 12:49    gone - no <span class="nb">logout
</span>reboot   system boot  5.10.0-16-amd64  Mon Jul 18 12:48   still running
joonhan  tty1                          Tue Jul 12 17:16 - crash <span class="o">(</span>5+19:32<span class="o">)</span>
reboot   system boot  5.10.0-16-amd64  Tue Jul 12 17:16   still running
joonhan  tty1                          Tue Jul 12 17:14 - crash  <span class="o">(</span>00:01<span class="o">)</span>
joonhan  tty1                          Mon Jul 11 23:13 - 17:14  <span class="o">(</span>18:00<span class="o">)</span>
reboot   system boot  5.10.0-16-amd64  Mon Jul 11 23:13   still running
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">last reboot</code> 를 입력하면 재부팅된 기록들만 내림차순으로 표시한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>reboot   system boot  5.10.0-16-amd64  Mon Jul 18 12:48   still running
reboot   system boot  5.10.0-16-amd64  Tue Jul 12 17:16   still running
reboot   system boot  5.10.0-16-amd64  Mon Jul 11 23:13   still running

wtmp begins Mon Jul 11 23:13:20 2022
</pre></table></code></div></div><p>또는 <code class="language-plaintext highlighter-rouge">who</code> 명령어를 사용할 수 있다. 해당 명령어는 호스트에 로그인한 사용자의 정보를 출력해준다. 실행 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>joonhan  tty1         Jul 18 12:49
joonhan  pts/0        Jul 19 13:57 <span class="o">(</span>10.0.2.2<span class="o">)</span>
</pre></table></code></div></div><p>옵션 <code class="language-plaintext highlighter-rouge">-b</code> 를 사용하면 마지막 시스템 부팅 시간을 출력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>system boot  Jul 18 12:48
</pre></table></code></div></div><h3 id="7-lvm-활성화-여부">7. LVM 활성화 여부</h3><p><code class="language-plaintext highlighter-rouge">lsblk</code> 명령어는 현재 장착된 디스크의 현황을 보여주는 명령어다. 실행 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre>NAME                    MAJ:MIN RM  SIZE RO TYPE  MOUNTPOINT
sda                       8:0    0    8G  0 disk
|-sda1                    8:1    0  476M  0 part  /boot
|-sda2                    8:2    0    1K  0 part
<span class="sb">`</span><span class="nt">-sda5</span>                    8:5    0  7.5G  0 part
  <span class="sb">`</span><span class="nt">-sda5_crypt</span>          254:0    0  7.5G  0 crypt
    |-LVMGroup-root     254:1    0  1.9G  0 lvm   /
    |-LVMGroup-swap     254:2    0  952M  0 lvm   <span class="o">[</span>SWAP]
    |-LVMGroup-home     254:3    0  952M  0 lvm   /home
    |-LVMGroup-var      254:4    0  952M  0 lvm   /var
    |-LVMGroup-srv      254:5    0  952M  0 lvm   /srv
    |-LVMGroup-tmp      254:6    0  952M  0 lvm   /tmp
    <span class="sb">`</span><span class="nt">-LVMGroup-var--log</span> 254:7    0    1G  0 lvm   /var/log
sr0                      11:0    1 1024M  0 rom
</pre></table></code></div></div><p>LVM으로 추출했을 때, LVM 파티셔닝이 되어 있다면 활성화된 것으로 판단할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>lsblk | <span class="nb">grep </span>LVM | <span class="nb">wc</span> <span class="nt">-l</span> | <span class="nb">awk</span> <span class="s1">'{if ($1 &gt; 0) print "yes"; else print "no"}'</span>
</pre></table></code></div></div><h3 id="8-활성-연결-수">8. 활성 연결 수</h3><p><code class="language-plaintext highlighter-rouge">ss</code> 명령어는 소켓 상태를 조회한다.</p><p>소켓이란 프로그램이 네트워크에서 데이터를 통신할 수 있도록 연결해주는 부분이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre>joonhan@joonhan42:~<span class="nv">$ </span>ss
Netid State Recv-Q Send-Q                 Local Address:Port    Peer Address:Port                                 Process
u_str ESTAB 0      0                                  <span class="k">*</span> 12227              <span class="k">*</span> 12228
u_str ESTAB 0      0        /run/dbus/system_bus_socket 12182              <span class="k">*</span> 12181
u_str ESTAB 0      0                                  <span class="k">*</span> 12098              <span class="k">*</span> 12099
u_str ESTAB 0      0                                  <span class="k">*</span> 12181              <span class="k">*</span> 12182
u_str ESTAB 0      0                                  <span class="k">*</span> 12176              <span class="k">*</span> 12177
u_str ESTAB 0      0                                  <span class="k">*</span> 12177              <span class="k">*</span> 12176
u_str ESTAB 0      0        /run/systemd/journal/stdout 12099              <span class="k">*</span> 12098
u_str ESTAB 0      0                                  <span class="k">*</span> 12522              <span class="k">*</span> 12523
u_str ESTAB 0      0                                  <span class="k">*</span> 12131              <span class="k">*</span> 12132
u_str ESTAB 0      0        /run/systemd/journal/stdout 12132              <span class="k">*</span> 12131
u_str ESTAB 0      0                                  <span class="k">*</span> 12046              <span class="k">*</span> 12047
u_str ESTAB 0      0        /run/dbus/system_bus_socket 12178              <span class="k">*</span> 11974
u_str ESTAB 0      0                                  <span class="k">*</span> 11090              <span class="k">*</span> 11137
u_str ESTAB 0      0        /run/systemd/journal/stdout 11137              <span class="k">*</span> 11090
u_str ESTAB 0      0        /run/systemd/journal/stdout 12476              <span class="k">*</span> 12475
u_str ESTAB 0      0                                  <span class="k">*</span> 11842              <span class="k">*</span> 11843
u_str ESTAB 0      0        /run/dbus/system_bus_socket 12523              <span class="k">*</span> 12522
u_str ESTAB 0      0        /run/systemd/journal/stdout 12049              <span class="k">*</span> 12048
u_str ESTAB 0      0        /run/systemd/journal/stdout 11843              <span class="k">*</span> 11842
u_str ESTAB 0      0                                  <span class="k">*</span> 12475              <span class="k">*</span> 12476
u_str ESTAB 0      0                                  <span class="k">*</span> 17076              <span class="k">*</span> 17075
u_str ESTAB 0      0        /run/systemd/journal/stdout 12342              <span class="k">*</span> 12341
u_str ESTAB 0      0        /run/systemd/journal/stdout 12047              <span class="k">*</span> 12046
u_str ESTAB 0      0                                  <span class="k">*</span> 12341              <span class="k">*</span> 12342
u_str ESTAB 0      0                                  <span class="k">*</span> 12048              <span class="k">*</span> 12049
u_str ESTAB 0      0                                  <span class="k">*</span> 11974              <span class="k">*</span> 12178
u_str ESTAB 0      0                                  <span class="k">*</span> 17075              <span class="k">*</span> 17076
u_str ESTAB 0      0        /run/dbus/system_bus_socket 12228              <span class="k">*</span> 12227
u_str ESTAB 0      0                                  <span class="k">*</span> 11981              <span class="k">*</span> 12179
u_str ESTAB 0      0                                  <span class="k">*</span> 17033              <span class="k">*</span> 0
u_str ESTAB 0      0        /run/dbus/system_bus_socket 12179              <span class="k">*</span> 11981
tcp   ESTAB 0      0                          10.0.2.15:4242        10.0.2.2:57087
</pre></table></code></div></div><ul><li><code class="language-plaintext highlighter-rouge">u_str</code> : unix stream 의 약자로, 입출력 장치를 연결하는 소켓으로 이해할 수 있다.<li><code class="language-plaintext highlighter-rouge">ESTAB</code> : 연결이 지속되고 있는 상태를 의미한다.</ul><p><code class="language-plaintext highlighter-rouge">-t</code> 옵션을 사용하면 tcp 네트워크 정보를 확인할 수 있다.</p><p>TCP 란 Transmission Control Protocol 의 약자로, 클라이언트와 서버가 연결된 상태에서 데이터를 주고 받는 프로토콜을 의미한다.</p><p>위의 실행 결과에서 SSH 연결이 되어 있기 때문에 <code class="language-plaintext highlighter-rouge">tcp</code> 항목이 표시되고 있는 것이다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>tcp   ESTAB 0      0                          10.0.2.15:4242        10.0.2.2:57087
</pre></table></code></div></div><h3 id="9-서버를-사용하는-사용자-수">9. 서버를 사용하는 사용자 수</h3><p><code class="language-plaintext highlighter-rouge">who</code> 명령어를 사용해서 출력할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">who</span> | <span class="nb">wc</span> <span class="nt">-l</span>
</pre></table></code></div></div><h3 id="10-네트워크-ip-및-mac-주소">10. 네트워크 IP 및 MAC 주소</h3><p><code class="language-plaintext highlighter-rouge">hostname</code> 은 호스트 서버의 이름을 표시하는 명령어이다. <code class="language-plaintext highlighter-rouge">-I</code> 옵션을 사용하면 호스트 서버의 IPv4 주소를 표시한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># IPv4 주소를 확인하는 명령어. IPv6 는 확인할 수 없음</span>
<span class="nb">hostname</span> <span class="nt">-I</span>
</pre></table></code></div></div><p>IPv4 는 네트워크 상에서 개별 호스트를 인식하기 위한 주소이다. 32비트 길이로 이루어져있으며, <code class="language-plaintext highlighter-rouge">000.000.000.000</code> 형태로 사용한다.</p><p><code class="language-plaintext highlighter-rouge">ip</code> 명령어는 네트워크 장비에 대한 정보를 보여주는 명령어이다. <code class="language-plaintext highlighter-rouge">ip link</code> 를 입력하면 MAC 주소를 조회할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ip <span class="nb">link</span>
</pre></table></code></div></div><p>MAC 주소란 Media Access Control Address 의 약자로 컴퓨터 간 데이터를 전송하기 위해 존재하는 고유한 물리적 주소이다. IP 주소는 네트워크 상황에 따라 다른 번호를 할당 받을 수도 있지만, MAC 주소는 이더넷 장비는 각각 고유한 주소를 할당받기 때문에 변하지 않는다. 심지어 스마트폰이나 블루투스 이어폰에도 고유 주소가 할당되어 있다.</p><p>위의 명령어를 실행한 결과는 다음과 같다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    <span class="nb">link</span>/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: enp0s3: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP mode DEFAULT group default qlen 1000
    <span class="nb">link</span>/ether 0X:00:XX:XX:XX:XX brd ff:ff:ff:ff:ff:ff
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">link/ether</code> 부분에 MAC 주소가 출력되는데, 이를 편집해서 출력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ip <span class="nb">link</span> | <span class="nb">awk</span> <span class="s1">'$1 == "link/ether" {print $2}'</span> | <span class="nb">sed</span> <span class="s1">'2, $d'</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">sed '2, $d'</code> 명령어는 2행부터 마지막 줄은 삭제(<code class="language-plaintext highlighter-rouge">$d</code>)한다는 명령이다.</p><h3 id="11-sudo로-실행한-명령어-수">11. sudo로 실행한 명령어 수</h3><p><code class="language-plaintext highlighter-rouge">journalctl</code> 는 리눅스용 시스템 매니저인 systemd 가 저장한 로그 데이터 journal 에서 검색할 수 있는 명령어이다.</p><p><code class="language-plaintext highlighter-rouge">_COMM</code> 옵션을 사용하면 특정 명령어를 사용한 로그를 확인할 수 있다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>journalctl <span class="nv">_COMM</span><span class="o">=</span><span class="nb">sudo</span> | <span class="nb">wc</span> <span class="nt">-l</span> | <span class="nb">tr</span> <span class="nt">-d</span> <span class="s1">'\n'</span>
</pre></table></code></div></div><h1 id="cron">cron</h1><p>특정 시간마다 특정 작업을 자동으로 수행하고 싶을 때 사용하는 데몬이다.</p><ul><li>데몬 : 메모리에 상주하면서 특정 요청이 들어오면 즉시 수행하는 프로그램</ul><p>cron 작업을 설정하는 파일을 crontab 파일이라 하며, <code class="language-plaintext highlighter-rouge">/etc/crontab</code> 로 접근할 수 있다.</p><h2 id="설치-여부-확인">설치 여부 확인</h2><p>아래의 명령어를 입력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ps <span class="nt">-ef</span> | <span class="nb">grep </span>cron
</pre></table></code></div></div><p>만약 설치되어 있다면 다음과 같이 표시된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>root         530       1  0 07:51 ?        00:00:00 /usr/sbin/cron <span class="nt">-f</span>
joonhan     3528    3214  0 17:37 pts/1    00:00:00 <span class="nb">grep </span>cron
</pre></table></code></div></div><h2 id="crontab-편집">crontab 편집</h2><p>아래의 명령어를 입력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>crontab <span class="nt">-e</span>
</pre></table></code></div></div><p>아래의 내용을 추가하고 저장한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c">#분  시 일 달 일 [실행시킬 명령어]</span>
<span class="k">*</span>/10 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /home/monitoring.sh | wall
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">wall</code> 명령어는 모든 로그인된 사용자에게 터미널로 메세지를 보내는 명령어이다.</p><p><code class="language-plaintext highlighter-rouge">*/10</code> 은 매 10분마다 실행한다는 의미이다.</p><p><code class="language-plaintext highlighter-rouge">monitoring.sh</code> 파일은 <code class="language-plaintext highlighter-rouge">/home</code> 디렉토리에 저장한다.</p><h2 id="monitoringsh-권한-편집">monitoring.sh 권한 편집</h2><p><code class="language-plaintext highlighter-rouge">chmod +x monitoring.sh</code> 을 입력하여 실행 권한을 부여한다.</p><h2 id="cron-실행">cron 실행</h2><p>아래의 명령어를 입력하면 cron 서비스를 시작한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl start cron
</pre></table></code></div></div><p>부팅 시 자동으로 실행하기 위해서는 아래의 명령어를 입력한다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl <span class="nb">enable </span>cron
</pre></table></code></div></div><h1 id="참고자료">참고자료</h1><ul><li><a href="https://jmoon417.tistory.com/36">[리눅스(Linux)] 비밀번호(패스워드) 정책 설정</a> [티스토리]<li><a href="https://sysops.tistory.com/125">[Linux] PAM 파일 상세 설명 및 설정 방법</a> [티스토리]<li><a href="http://www.igloosec.co.kr/BLOG_%EB%A6%AC%EB%88%85%EC%8A%A4%20PAM%20%EB%AA%A8%EB%93%88%EC%9D%98%20%EC%9D%B4%ED%95%B4?searchItem=&amp;searchWord=&amp;bbsCateId=49&amp;gotoPage=1">리눅스 PAM 모듈의 이해</a> [IGLOO]<li><a href="https://unix.stackexchange.com/questions/121087/why-is-this-random-password-flagged-saying-it-is-too-simplistic-systematic">Why is this random password flagged saying it is too simplistic/systematic?</a> [stackexchange]<li><a href="https://etloveguitar.tistory.com/62">Physical CPU와 Logical CPU의 차이 (processor, cpu, thread 개념)</a> [티스토리]<li><a href="https://www.linkedin.com/pulse/understanding-physical-logical-cpus-akshay-deshpande/">Understanding Physical and Logical CPUs</a> [Linkedin]<li><a href="https://dmzld.tistory.com/18">[OS] CPU, Processor, Core, Process, Thread 그리고 관계 정리</a> [티스토리]<li><a href="https://www.quora.com/What-is-the-difference-between-Virtual-CPU-and-Logical-CPU">What is the difference between Virtual CPU and Logical CPU?</a> [quora]<li><a href="https://webhostinggeeks.com/howto/how-to-display-the-number-of-processors-vcpu-on-linux-vps/">How to Display the Number of Processors (vCPU) on Linux VPS</a> [webhostinggeeks]<li><a href="https://sc-iwrwh.tistory.com/26">CPU 코어와 쓰레드</a> [CPU 코어와 쓰레드]<li><a href="https://bskyvision.com/entry/%EB%9E%A8RAM%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80">램(RAM)이란 무엇인가?</a> [bskyvision]<li><a href="https://namu.wiki/w/RAM">RAM</a> [나무위키]<li><a href="https://jw910911.tistory.com/122">리눅스 : Swap 메모리란?</a> [티스토리]<li><a href="https://sidepower.tistory.com/119">리눅스 tmpfs 란 무엇인가</a> [티스토리]<li><a href="https://recipes4dev.tistory.com/171">리눅스 awk 명령어 사용법. (Linux awk command) - 리눅스 파일 텍스트 데이터 검사, 조작, 출력.</a> [티스토리]<li><a href="https://phoenixnap.com/kb/check-cpu-usage-load-linux">How to Check CPU Utilization in Linux with Command Line</a> [phoenixNAP]<li><a href="https://en.wikipedia.org/wiki/STREAMS">STREAMS</a> [wikipedia]<li><a href="https://coding-factory.tistory.com/614">[Network] TCP / UDP의 개념과 특징, 차이점</a> [티스토리]<li><a href="https://xn--3e0bx5euxnjje69i70af08bea817g.xn--3e0b707e/jsp/resources/ipv4Info.jsp">IPv4주소란?</a> [한국인터넷정보센터]<li><a href="https://jhnyang.tistory.com/404">맥 어드레스란 무엇인가? IP주소와 맥주소(MAC address) 차이, 맥 주소 확인하는 법 - 네트워크 기초</a> [티스토리]<li><a href="https://jhnyang.tistory.com/287">[리눅스/유닉스] 유용 명령어 sed를 살펴보자! sed 명령어 사용법과 예시, 패턴 스페이스와 홀드 스페이스, 유용 표현</a> [티스토리]<li><a href="https://www.lesstif.com/system-admin/linux-journalctl-82215080.html">Linux journalctl 사용법</a> [lessif]<li><a href="https://valuefactory.tistory.com/229">[linux]데몬(daemon) 이란?</a> [티스토리]</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/42seoul/'>42seoul</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/born2beroot/" class="post-tag no-text-decoration">born2beroot</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron - Dev Joon&url=https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron - Dev Joon&u=https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Born2beroot] 7. 시스템 정보 출력(monitoring.sh)과 cron - Dev Joon&url=https://han-joon-hyeok.github.io/posts/born2beroot-monitoring-system-and-cron/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/c-bitwise-operation-between-different-integer-sizes/">[C언어] 자료형 크기 차이로 인한 비트 연산 오류 해결 방법</a><li><a href="/posts/connect-to-ec2-without-ssh-key-using-session-manager/">[AWS] EC2 인스턴스 ssh 키 없이 터미널 접속하는 방법 (AWS Session Manager)</a><li><a href="/posts/how-to-access-geo-restricted-websites-using-mullvad-vpn/">국가 제한이 걸린 사이트에 접속하는 방법 (feat. Mullvad VPN)</a><li><a href="/posts/network-overview/">네트워크 LAN, WAN / 스위치, 라우터 / IP 주소 / 서브넷 개념 정리</a><li><a href="/posts/what-is-nat/">NAT란?</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/born2beroot-install-virtual-machine/"><div class="card-body"> <span class="timeago small" > Aug 17, 2022 <i class="unloaded">2022-08-17T17:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 1. 가상 머신 및 데비안 설치</h3><div class="text-muted small"><p> 과제 소개 Born2beroot 과제는 가상 머신에 운영체제를 설치하고, 여러 사용자가 운영체제를 이용할 수 있도록 기본 환경 설정을 하는 것이 목표이다. 파티션 설정, 비밀번호 정책, 방화벽 설정, SSH 연결, 운영체제 등을 배우게 된다. 추가로 보너스 과제를 수행한다면 워드 프레스를 설치하기 위해 웹 서버, WAS, DB 까지 가볍게 짚어볼 수...</p></div></div></a></div><div class="card"> <a href="/posts/born2beroot-install-sudo/"><div class="card-body"> <span class="timeago small" > Sep 3, 2022 <i class="unloaded">2022-09-03T23:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 2. sudo 설치</h3><div class="text-muted small"><p> sudo 설치 CentOS 는 sudo 가 기본적으로 내장되어 있지만, 데비안은 그렇지 않기 때문에 sudo 를 별도로 설치해야 한다. sudo 란? 출처: xkcd 리눅스 운영체제에서 최고 관리자 권한으로 실행하는 프로그램이다. sudo 는 super user do(최고 권한 실행) 또는 substitute user do(다른 사용자의 ...</p></div></div></a></div><div class="card"> <a href="/posts/born2beroot-install-apparmor/"><div class="card-body"> <span class="timeago small" > Sep 4, 2022 <i class="unloaded">2022-09-04T22:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 3. AppArmor 설치</h3><div class="text-muted small"><p> AppArmor 설치 AppArmor 는 데비안 운영체제 설치와 함께 설치된다. 해당 패키지가 설치되었는지 확인하기 위해서는 다음의 명령어를 사용한다. sudo dpkg -l apparmor sudo dpkg -l apparmor-utils 만약 설치되지 않았다면 다음과 같이 Version 와 Architecture 항목이 &lt;none&g...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/born2beroot-setting-password-policy/" class="btn btn-outline-primary" prompt="Older"><p>[Born2beroot] 6. 비밀번호 정책 설정</p></a> <a href="/posts/born2beroot-install-wordpress/" class="btn btn-outline-primary" prompt="Newer"><p>[Born2beroot] 8. WordPress 설치</p></a></div><script src="https://utteranc.es/client.js" repo="Han-Joon-Hyeok/Han-Joon-Hyeok.github.io" issue-term="pathname" label="Comments" theme="preferred-color-scheme" crossorigin="anonymous" async> </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/han-joon-hyeok">Joon Hyeok Han</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://han-joon-hyeok.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
