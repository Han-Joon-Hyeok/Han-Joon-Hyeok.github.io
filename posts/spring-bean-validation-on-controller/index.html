<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.0" /><meta property="og:title" content="[Spring] DTO 입력 값 검증하기 (Bean Validation 활용)" /><meta name="author" content="Joon Hyeok Han" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="개요" /><meta property="og:description" content="개요" /><link rel="canonical" href="https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/" /><meta property="og:url" content="https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/" /><meta property="og:site_name" content="Dev Joon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-12-29T18:10:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Spring] DTO 입력 값 검증하기 (Bean Validation 활용)" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Joon Hyeok Han" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joon Hyeok Han"},"dateModified":"2024-12-29T18:10:00+09:00","datePublished":"2024-12-29T18:10:00+09:00","description":"개요","headline":"[Spring] DTO 입력 값 검증하기 (Bean Validation 활용)","mainEntityOfPage":{"@type":"WebPage","@id":"https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/"},"url":"https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/"}</script><title>[Spring] DTO 입력 값 검증하기 (Bean Validation 활용) | Dev Joon</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-SKST7KNWSJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SKST7KNWSJ'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dev Joon</a></div><div class="site-subtitle font-italic">성장하는 개발자, 한준혁입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Han-Joon-Hyeok" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['joonhyeok.han','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Spring] DTO 입력 값 검증하기 (Bean Validation 활용)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Spring] DTO 입력 값 검증하기 (Bean Validation 활용)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Dec 29, 2024, 6:10 PM +0900" > Dec 29, 2024 <i class="unloaded">2024-12-29T18:10:00+09:00</i> </span> by <span class="author"> Joon Hyeok Han </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1201 words">6 min</span></div></div><div class="post-content"><h1 id="개요">개요</h1><p>컨트롤러에서 DTO를 통해 전달받는 클라이언트의 요청의 입력 값에 제약 조건을 설정하기 위해 Spring Bean Validation을 활용하는 방법을 정리했습니다.</p><h1 id="도입-배경">도입 배경</h1><p>프론트엔드에서 작성된 게시물 본문의 길이는 최대 1,000자까지만 제한하는 규칙을 정했습니다. 이를 처리하기 위해 백엔드에서 아래와 같은 DTO를 통해 요청을 받습니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AddPostRequest</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>컨트롤러는 아래와 같습니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/challenges/{id}/posts"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">SuccessResponse</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="nf">createPost</span><span class="o">(</span>
  <span class="nd">@RequestBody</span> <span class="nc">AddPostRequest</span> <span class="n">request</span><span class="o">,</span>
  <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">,</span>
  <span class="nd">@AuthenticationPrincipal</span> <span class="nc">CustomUserDetails</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">challengePostCreationService</span><span class="o">.</span><span class="na">createPost</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getMember</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><p>문자열 길이 검증 로직을 서비스 계층에 추가할 수도 있지만, 컨트롤러에서 미리 검증하는 방식을 채택했습니다. 컨트롤러에서 입력 값에 대한 제약 조건(길이, 값의 크기, 문자열 형식 등)을 검사하고, 서비스에서는 DB에서 조회한 데이터와 비교하는 것과 같은 비즈니스 로직을 담당하여 계층 별로 역할을 나눔으로써 검증 위치를 쉽게 파악하고자 했습니다.</p><h1 id="적용-방법">적용 방법</h1><h2 id="1-의존성-추가">1. 의존성 추가</h2><p>의존성 관리 파일(<code class="language-plaintext highlighter-rouge">build.gradle</code>)에 Bean Validation 관련 의존성을 추가합니다.</p><div class="language-groovy highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">dependencies</span> <span class="o">{</span>
  <span class="n">implementation</span> <span class="s1">'org.springframework.boot:spring-boot-starter-validation'</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="2-어노테이션-추가">2. 어노테이션 추가</h2><h3 id="dto">DTO</h3><p>DTO 클래스에 검증용 어노테이션을 추가합니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@Builder</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AddPostRequest</span> <span class="o">{</span>
  <span class="nd">@Size</span><span class="o">(</span><span class="n">max</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s">"본문 길이는 최대 {max}자 입니다."</span><span class="o">)</span> <span class="c1">// @Size 어노테이션 추가</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>문자열 길이를 제한하기 위해 <code class="language-plaintext highlighter-rouge">@Size</code> 어노테이션을 사용합니다. 또한, <code class="language-plaintext highlighter-rouge">message</code> 속성을 통해 입력 값이 1,000자를 초과할 경우 클라이언트에 전달할 메시지를 정의할 수 있습니다. <code class="language-plaintext highlighter-rouge">{max}</code> 는 <code class="language-plaintext highlighter-rouge">max</code> 속성 값을 문자열에 대입하며, 위의 코드에서는 “본문 길이는 최대 1000자 입니다.”라는 문자열을 생성합니다.</p><p>공식 문서에서 <code class="language-plaintext highlighter-rouge">@Size</code> 어노테이션은 문자열에 대한 검증을 담당한다고 나와있습니다.</p><blockquote><p>public @interface Size</p><p>The annotated element size must be between the specified boundaries (included).</p><p>Supported types are:</p><ul><li><code class="language-plaintext highlighter-rouge">CharSequence</code> (length of character sequence is evaluated)<li><code class="language-plaintext highlighter-rouge">Collection</code> (collection size is evaluated)<li><code class="language-plaintext highlighter-rouge">Map</code> (map size is evaluated)</ul></blockquote><p>참고로, <code class="language-plaintext highlighter-rouge">@Max</code> 와 <code class="language-plaintext highlighter-rouge">@Min</code> 어노테이션은 숫자 데이터의 크기를 검증하는 데 사용됩니다.</p><blockquote><p>public @interface Min</p><p>The annotated element must be a number whose value must be higher or equal to the specified minimum.</p><p>Supported types are:</p><ul><li><code class="language-plaintext highlighter-rouge">BigDecimal</code><li><code class="language-plaintext highlighter-rouge">BigInteger</code><li><code class="language-plaintext highlighter-rouge">byte</code>, <code class="language-plaintext highlighter-rouge">short</code>, <code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">long</code>, and their respective wrappers</ul></blockquote><h3 id="controller">Controller</h3><p>컨트롤러 매개변수에 <code class="language-plaintext highlighter-rouge">@Valid</code> 어노테이션을 추가합니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/challenges/{id}/posts"</span><span class="o">)</span>
<span class="kd">public</span> <span class="nc">SuccessResponse</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="nf">createPost</span><span class="o">(</span>
  <span class="nd">@Valid</span> <span class="nd">@RequestBody</span> <span class="nc">AddPostRequest</span> <span class="n">request</span><span class="o">,</span> <span class="c1">// @Valid 어노테이션 추가</span>
  <span class="nd">@PathVariable</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="nc">Long</span> <span class="n">id</span><span class="o">,</span>
  <span class="nd">@AuthenticationPrincipal</span> <span class="nc">CustomUserDetails</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">challengePostCreationService</span><span class="o">.</span><span class="na">createPost</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">user</span><span class="o">.</span><span class="na">getMember</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="3-exception-handler-추가-선택">3. Exception Handler 추가 (선택)</h2><p>오류가 발생한 경우 클라이언트에게 <code class="language-plaintext highlighter-rouge">ErrorResponse</code> 라는 클래스를 생성하여 응답하고 있습니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nd">@Getter</span>
<span class="nd">@NoArgsConstructor</span><span class="o">(</span><span class="n">access</span> <span class="o">=</span> <span class="nc">AccessLevel</span><span class="o">.</span><span class="na">PROTECTED</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ErrorResponse</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">code</span><span class="o">;</span>
  <span class="kd">private</span> <span class="nc">String</span> <span class="n">message</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>클라이언트는 아래와 같은 JSON 형식으로 응답을 받습니다.</p><div class="language-json highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BAD_REQUEST"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"본문 길이는 최대 1000자 입니다."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Bean Validation은 제약 조건을 위반한 경우 <code class="language-plaintext highlighter-rouge">MethodArgumentNotValidException</code> 예외를 발생시킵니다. 따라서 <code class="language-plaintext highlighter-rouge">@RestControllerAdvice</code> 어노테이션을 적용한 Handler 클래스에 아래와 같이 작성했습니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nd">@RestControllerAdvice</span>
<span class="nd">@Slf4j</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GlobalExceptionHandler</span> <span class="o">{</span>
    <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="nc">MethodArgumentNotValidException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">ResponseEntity</span><span class="o">&lt;</span><span class="nc">ErrorResponse</span><span class="o">&gt;</span> <span class="nf">handleMethodArgumentNotValidException</span><span class="o">(</span>
        <span class="nc">MethodArgumentNotValidException</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="nc">ErrorResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="nc">ErrorResponse</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"BAD_REQUEST"</span><span class="o">,</span>
            <span class="n">ex</span><span class="o">.</span><span class="na">getBindingResult</span><span class="o">().</span><span class="na">getAllErrors</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">getDefaultMessage</span><span class="o">());</span>
        <span class="k">return</span> <span class="nc">ResponseEntity</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="nc">HttpStatus</span><span class="o">.</span><span class="na">BAD_REQUEST</span><span class="o">).</span><span class="na">body</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="4-테스트-코드-작성-선택">4. 테스트 코드 작성 (선택)</h2><p>프로젝트에서 Spring REST Docs를 사용하고 있으므로, 아래와 같은 방식으로 테스트 코드를 작성했습니다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="nd">@Test</span>
<span class="nd">@WithMockOAuth2User</span>
<span class="nd">@DisplayName</span><span class="o">(</span><span class="s">"챌린지 게시물 생성 - 게시물 길이 초과 (400 Bad Request)"</span><span class="o">)</span>
<span class="kt">void</span> <span class="nf">challengePostCreationContentLengthTooLongException</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>

    <span class="c1">// given</span>
    <span class="nc">AddPostRequest</span> <span class="n">invalidRequest</span> <span class="o">=</span> <span class="nc">AddPostRequest</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="s">"A"</span><span class="o">.</span><span class="na">repeat</span><span class="o">(</span><span class="mi">1001</span><span class="o">))</span> <span class="c1">// 본문 길이 초과</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="c1">// when</span>
    <span class="nc">ResultActions</span> <span class="n">result</span> <span class="o">=</span> <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">post</span><span class="o">(</span><span class="s">"/api/challenges/{id}/posts"</span><span class="o">,</span> <span class="mi">1L</span><span class="o">)</span>
        <span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">AUTHORIZATION</span><span class="o">,</span> <span class="no">AUTHORIZATION_HEADER_PREFIX</span> <span class="o">+</span> <span class="s">"ACCESS_TOKEN"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">content</span><span class="o">(</span><span class="n">objectMapper</span><span class="o">.</span><span class="na">writeValueAsString</span><span class="o">(</span><span class="n">invalidRequest</span><span class="o">))</span>
        <span class="o">.</span><span class="na">contentType</span><span class="o">(</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_JSON</span><span class="o">));</span>

    <span class="c1">// then</span>
    <span class="n">result</span><span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isBadRequest</span><span class="o">())</span>
        <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">jsonPath</span><span class="o">(</span><span class="s">"$.message"</span><span class="o">).</span><span class="na">value</span><span class="o">(</span><span class="s">"본문 길이는 최대 1000자 입니다."</span><span class="o">))</span>
        <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">document</span><span class="o">(</span><span class="s">"challenge/challenge-post-creation-content-length-too-long-exception"</span><span class="o">,</span>
            <span class="n">requestHeaders</span><span class="o">(</span>
                <span class="n">headerWithName</span><span class="o">(</span><span class="nc">HttpHeaders</span><span class="o">.</span><span class="na">AUTHORIZATION</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"액세스 토큰"</span><span class="o">)</span>
            <span class="o">),</span>
            <span class="n">responseFields</span><span class="o">(</span>
                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"code"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"오류 응답 코드"</span><span class="o">),</span>
                <span class="n">fieldWithPath</span><span class="o">(</span><span class="s">"message"</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">"오류 메세지"</span><span class="o">)</span>
            <span class="o">)</span>
        <span class="o">));</span>
<span class="o">}</span>
</pre></table></code></div></div><h1 id="참고자료">참고자료</h1><ul><li><a href="https://velog.io/@joeun-01/Spring-Boot-DTO에서-Validation-처리하기">[Spring Boot] DTO에서 Validation 처리하기</a> [velog]<li><a href="https://tecoble.techcourse.co.kr/post/2020-09-20-validation-in-spring-boot/">Spring Boot에서 DTO 검증하기</a> [Techoble]<li><a href="https://readinggeneral.tistory.com/entry/Spring-Boot-Validation-Max-%EC%99%80-Size%EC%9D%98-%EC%B0%A8%EC%9D%B4">[Spring Boot] Validation @Max 와 @Size의 차이</a> [티스토리]<li><a href="https://velog.io/@dhk22/Spring-Bean-validation-응답-메시지-커스텀-하기-ResponseEntityExceptionHandler">[Spring] Bean validation 응답 메시지 커스텀 하기 (ResponseEntityExceptionHandler)</a> [velog]<li><a href="https://jakarta.ee/specifications/bean-validation/3.0/apidocs/">Jakarta Bean Validation API</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/java/'>Java</a>, <a href='/categories/spring/'>Spring</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Spring] DTO 입력 값 검증하기 (Bean Validation 활용) - Dev Joon&url=https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Spring] DTO 입력 값 검증하기 (Bean Validation 활용) - Dev Joon&u=https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Spring] DTO 입력 값 검증하기 (Bean Validation 활용) - Dev Joon&url=https://han-joon-hyeok.github.io/posts/spring-bean-validation-on-controller/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/c-bitwise-operation-between-different-integer-sizes/">[C언어] 자료형 크기 차이로 인한 비트 연산 오류 해결 방법</a><li><a href="/posts/connect-to-ec2-without-ssh-key-using-session-manager/">[AWS] EC2 인스턴스 ssh 키 없이 터미널 접속하는 방법 (AWS Session Manager)</a><li><a href="/posts/how-to-access-geo-restricted-websites-using-mullvad-vpn/">국가 제한이 걸린 사이트에 접속하는 방법 (feat. Mullvad VPN)</a><li><a href="/posts/network-overview/">네트워크 LAN, WAN / 스위치, 라우터 / IP 주소 / 서브넷 개념 정리</a><li><a href="/posts/what-is-nat/">NAT란?</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/java-spring-problem-occured-configuring-root-project/"><div class="card-body"> <span class="timeago small" > Mar 4, 2024 <i class="unloaded">2024-03-04T17:35:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Java Spring] A problem occured configuring root project 오류 해결 방법</h3><div class="text-muted small"><p> 실행 환경 OS : MacOS(Intel) Sonoma 14.2.1 IntelliJ : Ultimate 2023.2.5 문제 상황 스프링 프로젝트를 실행하려고 했지만 A problem occured configuring root project 으로 시작하는 오류가 발생했다. 문제 원인 스프링 프로젝트 세팅 시 자바 17 버전을 ...</p></div></div></a></div><div class="card"> <a href="/posts/java-spring-postgres-connection/"><div class="card-body"> <span class="timeago small" > Mar 4, 2024 <i class="unloaded">2024-03-04T19:35:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Java Spring] PostgreSQL 연동이 안될 때 해결 방법 (Failed to configure a DataSource)</h3><div class="text-muted small"><p> 실행 환경 OS : MacOS(Intel) Sonoma 14.2.1 Java : 17 Spring Boot : 3.2.3 IntelliJ Ultimate : 2023.2.6 문제 상황 PostgreSQL 과 Spring 을 연동하는 작업을 진행하고 있었다. Spring 프로젝트의 설정은 spring intializer ...</p></div></div></a></div><div class="card"> <a href="/posts/java-spring-path-variable-with-glob/"><div class="card-body"> <span class="timeago small" > May 21, 2024 <i class="unloaded">2024-05-21T22:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Java Spring] path variable 사용 시 Security 설정 확인 사항</h3><div class="text-muted small"><p> 실행 환경 OS: MacOS Sonoma 14.5 Java: 17 Spring Boot: 3.2.3 문제 상황 데이터를 조회하기 위해 컨트롤러에 아래와 같이 path variable 를 사용했다. @GetMapping("/challenge/{id}") @ResponseStatus(HttpStatus.OK) public Respon...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/argo-notification-default-trigger-setting/" class="btn btn-outline-primary" prompt="Older"><p>[ArgoCD] Notification default trigger 설정 방법</p></a> <a href="/posts/aws-transfer-domain-to-another-account/" class="btn btn-outline-primary" prompt="Newer"><p>[AWS] Route 53 계정 간 도메인 이전 및 ACM 인증서 발급 방법</p></a></div><script src="https://utteranc.es/client.js" repo="Han-Joon-Hyeok/Han-Joon-Hyeok.github.io" issue-term="pathname" label="Comments" theme="preferred-color-scheme" crossorigin="anonymous" async> </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/han-joon-hyeok">Joon Hyeok Han</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://han-joon-hyeok.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
