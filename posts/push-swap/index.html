<!DOCTYPE html><html lang="ko-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.3.0" /><meta property="og:title" content="[42Seoul] push_swap 구현 과정" /><meta name="author" content="Joon Hyeok Han" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="플로우차트" /><meta property="og:description" content="플로우차트" /><link rel="canonical" href="https://han-joon-hyeok.github.io/posts/push-swap/" /><meta property="og:url" content="https://han-joon-hyeok.github.io/posts/push-swap/" /><meta property="og:site_name" content="Dev Joon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-09-05T00:05:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[42Seoul] push_swap 구현 과정" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Joon Hyeok Han" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joon Hyeok Han"},"dateModified":"2023-11-02T00:06:02+09:00","datePublished":"2022-09-05T00:05:00+09:00","description":"플로우차트","headline":"[42Seoul] push_swap 구현 과정","mainEntityOfPage":{"@type":"WebPage","@id":"https://han-joon-hyeok.github.io/posts/push-swap/"},"url":"https://han-joon-hyeok.github.io/posts/push-swap/"}</script><title>[42Seoul] push_swap 구현 과정 | Dev Joon</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-SKST7KNWSJ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SKST7KNWSJ'); }); </script> <script type="text/x-mathjax-config"> MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}}); </script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dev Joon</a></div><div class="site-subtitle font-italic">성장하는 개발자, 한준혁입니다.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/Han-Joon-Hyeok" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['joonhyeok.han','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[42Seoul] push_swap 구현 과정</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[42Seoul] push_swap 구현 과정</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Sep 5, 2022, 12:05 AM +0900" > Sep 5, 2022 <i class="unloaded">2022-09-05T00:05:00+09:00</i> </span> by <span class="author"> Joon Hyeok Han </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Nov 2, 2023, 12:06 AM +0900" > Nov 2, 2023 <i class="unloaded">2023-11-02T00:06:02+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4033 words">22 min</span></div></div><div class="post-content"><h1 id="플로우차트">플로우차트</h1><h2 id="mandatory">Mandatory</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/1.png" alt="1" /></p><h2 id="bonus">Bonus</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/2.png" alt="2" /></p><h1 id="인자값">인자값</h1><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>./push_swap 4 2 1 3 5
</pre></table></code></div></div><p>인자가 입력된 순서대로 스택 A에 저장한다.</p><p>즉, 가장 먼저 들어온 인자는 스택 A의 맨 밑에, 가장 나중에 들어온 인자는 스택 A의 맨 위에 위치한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/3.png" alt="3" /></p><h1 id="자료구조">자료구조</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/4.png" alt="4" /></p><p>스택을 구현하기 위해 원형 양방향 연결 리스트를 사용했다.</p><p>스택의 상단 뿐만 아니라 하단으로도 접근하여 연산횟수의 최소화를 이루고자 했다.</p><p>특히, 이번 과제에서는 모래시계 알고리즘을 사용했기 때문에 하단에 위치한 원소를 빠르게 상단으로 올릴 필요가 있었다.</p><h1 id="스택-a에서-스택-b로-옮기기">스택 A에서 스택 B로 옮기기</h1><h2 id="인덱싱">인덱싱</h2><p>인자로 들어온 원소들의 값을 인덱스 값으로 바꾼다.</p><p>예를 들어, 인자로 <code class="language-plaintext highlighter-rouge">5 2 99 0</code> 가 들어왔다면, <code class="language-plaintext highlighter-rouge">2 1 3 0</code> 과 같이 바꾸는 것이다.</p><p>인덱스 값으로 바꾸는 이유는 스택으로 넘겨야 할 순서를 명확하게 정하기 위함이다.</p><p>인덱스로 변환하는 작업은 정렬 알고리즘을 사용하면 되는데, 이번 과제에서는 퀵 정렬을 사용했다. 퀵 정렬은 평균 시간 복잡도가 $n\ log_2n$ 이기 때문에 빠른 연산을 위해 사용했다.</p><h2 id="모래시계-알고리즘">모래시계 알고리즘</h2><p>모래시계 알고리즘이란 push_swap 과제를 수행하기 위해 사용하는 특수한 알고리즘이다.</p><p>스택 A에 저장된 원소들을 스택 B로 옮겼을 때 큰 값들은 스택의 양 끝에 위치하고, 작은 값들은 스택의 중앙에 위치한 모습이 모래시계 모양과 비슷해서 모래시계 알고리즘으로 불리고 있다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/5.png" alt="5" /></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/6.png" alt="6" /></p><p>모래시계 알고리즘을 사용하는 이유는 연산횟수를 크게 줄일 수 있기 때문이다.</p><p>스택 B에서 스택 A로 값을 넘길 때, 스택 B의 상단과 하단에서만 값을 찾기 때문에 상대적으로 연산을 적게한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/7.png" alt="7" /></p><p>위와 같이 모래시계가 아닌 형태에서는 연산을 총 3번 수행한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/8.png" alt="8" /></p><p>한편, 모래시계 형태에서는 다음으로 넘겨야 할 수가 스택의 상단에 위치한다면 연산을 한번만 수행한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/9.png" alt="9" /></p><p>또는 스택의 하단에 위치해도 모래시계 형태가 아닐 때보다 연산 횟수가 상대적으로 적어진다.</p><p>정렬해야 하는 수가 더 많아진다면 모래시계 형태에서는 연산 횟수는 더욱 많이 줄어들 것이다.</p><h2 id="구간을-나누기-위한-chunk">구간을 나누기 위한 chunk</h2><p>스택 A에서 스택 B로 넘길 때 스택 B가 모래시계 구조를 유지하기 위해서 chunk(덩어리)를 사용한다.</p><p>chunk는 숫자를 일정 구간으로 나누어주는 역할을 한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/10.png" alt="10" /></p><p>위의 그림처럼 가운데를 중심으로 대칭을 이루며 일정 구간에 속한 숫자들이 분포하도록 스택 A에서 스택 B로 원소들을 넘겨주기 위해 chunk를 사용한다.</p><p>나중에 스택 B에서 스택 A로 원소들을 옮길 때, 스택의 상단과 하단 근처에 넘겨야 하는 값들이 위치하도록 하는 것이 핵심이다.</p><p>다만, 숫자의 개수에 따라서 chunk의 값을 적절하게 조정해주어야 한다.</p><p>chunk가 작으면 일정 구간에 있는 숫자들의 편차가 작아지면서 정밀한 모래시계 모양이 만들어지지만, 연산 횟수가 증가한다.</p><p>아래의 사진은 300개의 숫자에 대해 chunk를 5로 설정한 결과이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/11.png" alt="11" /></p><p>반대로 chunk가 과도하게 크면 숫자들의 편차가 커지면서 모래시계 모양이 엉성하게 만들어진다.</p><p>아래의 사진은 300개의 숫자에 대해 chunk를 150으로 설정한 결과이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/12.png" alt="12" /></p><p>그리고 아래의 사진은 동일한 숫자 300개에 대해 chunk를 25개로 설정한 결과이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/13.png" alt="13" /></p><p>chunk가 과도하게 큰 경우보다 촘촘하지만, 과도하게 작은 경우보다는 약간 엉성한 모양을 띄고 있다.</p><p>하지만, 연산 횟수는 다른 경우보다 가장 적은 것으로 나왔다.</p><p>chunk에 따른 연산 횟수는 다음과 같다.</p><p>즉, 이를 통해 숫자의 개수에 따라 적절한 chunk를 설정해주어야 연산 횟수를 최소화 할 수 있다는 것을 알 수 있다.</p><p>그렇다면 적절한 chunk를 어떻게 구할 수 있을까?</p><p>우선, 직접 값을 넣어가며 귀납적으로 구하는 방법이 있다.</p><p>하지만 이미 과제를 구현하신 분들께서는 아래와 같은 방정식을 구하셨다.</p>\[y = 0.000000053x^2 + 0.03x + 14.5\]<p>위의 식을 이용하면 숫자 <code class="language-plaintext highlighter-rouge">x</code> 개에 따라 적절한 chunk <code class="language-plaintext highlighter-rouge">y</code> 를 구할 수 있다.</p><h2 id="구현">구현</h2><p>num은 현재 스택 A에 남아있는 가장 작은 수라 해보자. 실제 값들을 인덱스로 바꾸었기 때문에 num은 0부터 시작한다.</p><p>현재 스택 A의 상단에 있는 값을 top이라 하면, 다음과 같은 규칙을 적용한다.</p><div class="table-wrapper"><table><thead><tr><th>조건<th>연산<tbody><tr><td>top ≤ num<td>pb<tr><td>top &gt; num &amp;&amp; top ≤ num + chunk<td>pb, rb<tr><td>top &gt; num + chunk<td>ra</table></div><h3 id="top--num">top ≤ num</h3><p>top이 num보다 작거나 같다는 것은 스택 B의 중앙에 위치해야 한다는 의미이다.</p><p>그렇기 때문에 바로 스택 B로 넘긴다.</p><h3 id="top--num--top--num--chunk">top &gt; num &amp;&amp; top ≤ num + chunk</h3><p>top이 num보다 크고, num + chunk보다 작거나 같다는 것은 스택의 중앙보다는 조금 더 위에 있거나 밑에 있어야 한다는 것을 의미한다.</p><p>그래서 스택 B로 보낸 다음 rb를 수행해서 스택의 양쪽으로 큰 값들이 위치하도록 한다.</p><p>만약, rb를 수행하지 않으면 모래시계 모양이 형성되지 않는다.</p><h3 id="top--num--chunk">top &gt; num + chunk</h3><p>top이 num + chunk보다 크다는 것은 스택 B로 넘겨야 하는 값이 아니라는 의미이다.</p><p>그래서 ra를 수행해서 다른 값을 top으로 올리는 것이다.</p><h2 id="최악의-경우">최악의 경우</h2><p>하지만 위와 같이 구현한다면 다음과 같은 케이스(526개)에 대해서는 성능이 좋지 않다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/14.png" alt="14" /></p><hr /><p>496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 523 524 525 526 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30</p><hr /><p>이 케이스에 대해서는 모래시계의 중앙에 위치해야 하는 수가 가장 맨 밑에 있어서 계속 <code class="language-plaintext highlighter-rouge">ra</code>를 수행해서 연산 횟수가 크게 증가했다. (연산 횟수 : 7414번)</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/15.gif" alt="15" /></p><p>임의의 숫자 500개에 대해서 수행했을 때 평균 5000번인 것에 비하면 성능이 좋지 않다는 것을 알 수 있다.</p><h2 id="성능-개선">성능 개선</h2><p>성능을 저하시키는 원인은 <code class="language-plaintext highlighter-rouge">top &gt; num + chunk</code> 인 경우에 <code class="language-plaintext highlighter-rouge">ra</code> 만 수행하기 때문이다.</p><p>만약 다음으로 넘길 숫자가 스택의 하단에 있다면 <code class="language-plaintext highlighter-rouge">ra</code> 가 아닌 <code class="language-plaintext highlighter-rouge">rra</code> 를 수행하면 연산 횟수를 줄일 수 있을 것이다.</p><p>그래서 스택의 상단 또는 하단에서 <code class="language-plaintext highlighter-rouge">top &lt;= num + chunk</code> 이 되는 지점을 찾아서 해당 지점까지 <code class="language-plaintext highlighter-rouge">rra</code> 또는 <code class="language-plaintext highlighter-rouge">ra</code> 를 해주는 것으로 해결했다.</p><p>의사 코드는 다음과 같다.</p><div class="language-c highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">while</span> <span class="p">(</span><span class="err">스택의</span> <span class="err">상단에서</span> <span class="n">num</span> <span class="o">+</span> <span class="n">chunk</span><span class="err">보다</span> <span class="err">같거나</span> <span class="err">작을</span> <span class="err">때</span> <span class="err">까지</span><span class="p">)</span>
	<span class="err">상단</span> <span class="err">개수</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="p">(</span><span class="err">스택의</span> <span class="err">하단에서</span> <span class="n">num</span> <span class="o">+</span> <span class="n">chunk</span><span class="err">보다</span> <span class="err">같거나</span> <span class="err">작을</span> <span class="err">때</span> <span class="err">까지</span><span class="p">)</span>
	<span class="err">하단</span> <span class="err">개수</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">if</span> <span class="p">(</span><span class="err">상단</span> <span class="err">개수</span> <span class="o">&lt;</span> <span class="err">하단</span> <span class="err">개수</span><span class="p">)</span>
	<span class="k">while</span> <span class="p">(</span><span class="err">상단</span> <span class="err">개수만큼</span><span class="p">)</span>
		<span class="n">rra</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="k">else</span>
	<span class="k">while</span> <span class="p">(</span><span class="err">하단</span> <span class="err">개수만큼</span><span class="p">)</span>
		<span class="n">ra</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></table></code></div></div><p>덕분에 약 2배 정도 연산 횟수를 줄일 수 있었다. (연산 횟수 : 3925번)</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/16.gif" alt="16" /></p><h2 id="과연-정말-최적화가-된-것일까">과연 정말 최적화가 된 것일까?</h2><p>최악의 경우에 대해 <code class="language-plaintext highlighter-rouge">rra</code> 도 함께 사용하도록 알고리즘을 바꾸면 다른 케이스들에서 평균 연산 횟수가 약 20% 증가하는 trade-off 관계를 발견했다.</p><p>즉, 오히려 <code class="language-plaintext highlighter-rouge">ra</code> 만 수행했을 때 연산이 더 적었다는 것이다.</p><p>평균적인 케이스와 최악의 케이스를 모두 잡기 위해 사용할 수 있는 최적의 알고리즘은 찾기 어려웠다.</p><p>이를 해결하기 위해 스택 A에서 스택 B로 넘기는 방법 2가지를 모두 시뮬레이션 해보고, 더 적은 연산을 수행하는 경우를 선택하는 그리디 알고리즘을 적용했다.</p><p>2가지 경우에 대해 모두 연산을 수행하다보니 시간 복잡도는 많이 증가했지만, 과제에서 요구하는 성능을 충족시키기 위해서는 최선의 선택이었다.</p><h1 id="스택-b에서-스택-a로-옮기기">스택 B에서 스택 A로 옮기기</h1><p>모래시계 모양으로 정렬된 스택 B에서 스택 A로 옮기는 것은 간단하다.</p><p>상단과 하단 중에서 스택 B에서 가장 큰 수를 찾아서 <code class="language-plaintext highlighter-rouge">rb</code> 또는 <code class="language-plaintext highlighter-rouge">rrb</code> 를 수행한 다음 <code class="language-plaintext highlighter-rouge">pb</code> 를 수행하면 된다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/images/2022/2022-10-21-push-swap/17.gif" alt="17" /></p><h1 id="보너스">보너스</h1><p>보너스는 Mandatory를 잘 마쳤다면 수월하게 해결할 수 있다.</p><p>보너스는 Mandatory에서 실행한 결과로 스택 A에 정렬이 잘 되었는지, 스택 B에 남은 원소는 없는지 판단하는 <code class="language-plaintext highlighter-rouge">checker</code> 를 만드는 것이다.</p><p>Mandatory에서 만든 파일을 아래와 같이 실행하면 수행한 연산들이 출력되는데, 이 연산들을 그대로 수행해서 결과를 확인하면 된다.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>./push_swap 4 5 1 3 2
ra
ra
pb
ra
pb
rra
pa
pa
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">push_swap</code> 실행 결과는 stdout 으로 출력되는데, <code class="language-plaintext highlighter-rouge">checker</code> 는 파이프를 통해 이 결과를 <code class="language-plaintext highlighter-rouge">get_next_line</code> 함수를 사용해서 받아오면 된다.</p><p>이 부분에 대해서는 file descriptor 를 이해하면 금방 해결할 수 있으므로 자세한 설명은 생략한다.</p><h1 id="회고">회고</h1><h2 id="최고의-알고리즘은-없다">최고의 알고리즘은 없다.</h2><p>데이터를 효율적으로 정렬하기 위해 수 많은 알고리즘이 존재하며, 자료구조도 많다.</p><p>문제를 해결하기 위해 어떤 알고리즘을 적용하면, 다른 알고리즘의 장점이 상쇄되는 trade-off 상황을 자주 접했다.</p><p>결국 알고리즘은 어떤 문제를 해결하기 위해 고안된 방법론 중 하나일 뿐, 모든 문제에 적합하다고는 할 수 없는 것이다.</p><p>문제에 맞는 알고리즘을 사용하되, 여러 제약 조건 중에서 포기할 수 있는 것과 포기하면 안되는 것을 선택하는 것이 중요하다는 것을 배웠다.</p><h2 id="정석은-없다">정석은 없다.</h2><p>사실 이 과제를 모래시계 알고리즘으로 해결하는 것에 대해 일종의 죄책감 내지는 불편함을 느끼고 있었다.</p><p>퀵 정렬이나 병합 정렬 같이 널리 알려진 정렬이 아닌 이 과제에만 적용할 수 있는 모래시계 알고리즘을 쓴다는 것이 약간 편법처럼 느껴졌기 때문이다.</p><p>하지만, 문제 하나를 해결하기 위해 정답은 여러 개가 있을 수 있는 것이기 때문에 이에 대한 불편함은 내려놓기로 했다. 어차피 모래시계 알고리즘을 구현하기 위해서 전처리 과정에서 퀵 정렬을 사용했으니, 어느 정도 과제의 목표를 달성한 것 아닐까 싶다.</p><p>대신, 모래시계 알고리즘이 왜 문제를 해결하는데 효율적이며, 내부적으로 어떻게 작동하는지 이해하기 위해 노력했다.</p><p>그리고 최악의 케이스를 해결하기 위해 그리디 방식으로 연산이 적은 횟수를 택하도록 했다.</p><p>어찌보면 이 과제를 해결하기 위해 퀵 정렬, 모래시계 알고리즘, 그리디 3가지 방식을 적용한 셈이다.</p><h2 id="함께하면-금방-한다">함께하면 금방 한다.</h2><p>push_swap은 2서클 과제에서도 수문장으로 소문난 과제였기에 두려움이 앞섰다.</p><p>하지만, 운이 좋게도 so_long 과제에 이어 이번 과제도 마음이 맞는 동료들과 함께 페어 프로그래밍을 하며 과제를 진행했다.</p><p>오프라인으로 모이기 어려운 상황이라서 주로 온라인으로 진행했는데, 보너스까지 구현하는데 약 2주 정도 소요되었다.</p><p>매일 스터디를 하지는 않았지만, 시간이 맞을 때마다 모여서 문제를 해결하니 혼자 과제를 할 때보다 훨씬 많은 것을 배울 수 있었다.</p><p>조건문에서 부등호 방향을 반대로 하거나, 변수 초기화를 안해서 생기는 에러를 동료가 빠르게 발견해준 덕분에 시간을 절약할 수 있었다.</p><p>이 자리를 빌어 함께 고생한 동료들에게 감사하다는 인사를 전한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/42seoul/'>42seoul</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/push-swap/" class="post-tag no-text-decoration">push_swap</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[42Seoul] push_swap 구현 과정 - Dev Joon&url=https://han-joon-hyeok.github.io/posts/push-swap/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[42Seoul] push_swap 구현 과정 - Dev Joon&u=https://han-joon-hyeok.github.io/posts/push-swap/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[42Seoul] push_swap 구현 과정 - Dev Joon&url=https://han-joon-hyeok.github.io/posts/push-swap/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/c-bitwise-operation-between-different-integer-sizes/">[C언어] 자료형 크기 차이로 인한 비트 연산 오류 해결 방법</a><li><a href="/posts/connect-to-ec2-without-ssh-key-using-session-manager/">[AWS] EC2 인스턴스 ssh 키 없이 터미널 접속하는 방법 (AWS Session Manager)</a><li><a href="/posts/how-to-access-geo-restricted-websites-using-mullvad-vpn/">국가 제한이 걸린 사이트에 접속하는 방법 (feat. Mullvad VPN)</a><li><a href="/posts/network-overview/">네트워크 LAN, WAN / 스위치, 라우터 / IP 주소 / 서브넷 개념 정리</a><li><a href="/posts/what-is-nat/">NAT란?</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/born2beroot-install-virtual-machine/"><div class="card-body"> <span class="timeago small" > Aug 17, 2022 <i class="unloaded">2022-08-17T17:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 1. 가상 머신 및 데비안 설치</h3><div class="text-muted small"><p> 과제 소개 Born2beroot 과제는 가상 머신에 운영체제를 설치하고, 여러 사용자가 운영체제를 이용할 수 있도록 기본 환경 설정을 하는 것이 목표이다. 파티션 설정, 비밀번호 정책, 방화벽 설정, SSH 연결, 운영체제 등을 배우게 된다. 추가로 보너스 과제를 수행한다면 워드 프레스를 설치하기 위해 웹 서버, WAS, DB 까지 가볍게 짚어볼 수...</p></div></div></a></div><div class="card"> <a href="/posts/born2beroot-install-sudo/"><div class="card-body"> <span class="timeago small" > Sep 3, 2022 <i class="unloaded">2022-09-03T23:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 2. sudo 설치</h3><div class="text-muted small"><p> sudo 설치 CentOS 는 sudo 가 기본적으로 내장되어 있지만, 데비안은 그렇지 않기 때문에 sudo 를 별도로 설치해야 한다. sudo 란? 출처: xkcd 리눅스 운영체제에서 최고 관리자 권한으로 실행하는 프로그램이다. sudo 는 super user do(최고 권한 실행) 또는 substitute user do(다른 사용자의 ...</p></div></div></a></div><div class="card"> <a href="/posts/born2beroot-install-apparmor/"><div class="card-body"> <span class="timeago small" > Sep 4, 2022 <i class="unloaded">2022-09-04T22:20:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Born2beroot] 3. AppArmor 설치</h3><div class="text-muted small"><p> AppArmor 설치 AppArmor 는 데비안 운영체제 설치와 함께 설치된다. 해당 패키지가 설치되었는지 확인하기 위해서는 다음의 명령어를 사용한다. sudo dpkg -l apparmor sudo dpkg -l apparmor-utils 만약 설치되지 않았다면 다음과 같이 Version 와 Architecture 항목이 &lt;none&g...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/so-long/" class="btn btn-outline-primary" prompt="Older"><p>[so_long] so_long 구현 과정 및 MLX 라이브러리 활용</p></a> <a href="/posts/42seoul-philosopher-implementation-retrospective/" class="btn btn-outline-primary" prompt="Newer"><p>[42Seoul] 식사하는 철학자(Philosopher) 과제 구현 과정 및 회고</p></a></div><script src="https://utteranc.es/client.js" repo="Han-Joon-Hyeok/Han-Joon-Hyeok.github.io" issue-term="pathname" label="Comments" theme="preferred-color-scheme" crossorigin="anonymous" async> </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/han-joon-hyeok">Joon Hyeok Han</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/programmers/">programmers</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/level2/">level2</a> <a class="post-tag" href="/tags/level1/">level1</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/os/">os</a> <a class="post-tag" href="/tags/pipex/">pipex</a> <a class="post-tag" href="/tags/born2beroot/">born2beroot</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/data-structure/">Data Structure</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://han-joon-hyeok.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
